// ğŸŒ ë‹¤ì¤‘ì–¸ì–´ ì§€ì› ì‹œìŠ¤í…œ
        const translations = {
            'en': {
                // UI ìš”ì†Œë“¤
                'app_title': "Ekman Transport Visualizer",
                'language_select': "ğŸŒ Language Selection",
                'param_settings': "ğŸ›ï¸ Parameter Settings",
                'wind_speed': "ğŸŒ¬ï¸ Wind Speed (m/s)",
                'wind_direction': "ğŸ§­ Wind Direction (Â°)",
                'latitude': "ğŸŒ Latitude (Â°)",
                'depth': "ğŸŒŠ Depth (m)",
                'vis_type': "ğŸ“Š Visualization Type",
                'vis_3d': "ğŸ”® 3D",
                'vis_2d': "ğŸ“ˆ 2D",
                'preset_settings': "âš¡ Preset Settings",
                'preset_normal': "ğŸŒ¤ï¸ Normal",
                'preset_strong': "ğŸ’¨ Strong Wind",
                'preset_typhoon': "ğŸŒªï¸ Typhoon",
                'location_select': "ğŸ—ºï¸ Location Selection",
                'calc_button': "ğŸ”„ Calculate & Visualize",
                'export_button': "ğŸ’¾ Export",
                'results_title': "ğŸ“‹ Calculation Results",
                'wind_stress': "ğŸ’¨ Wind Stress:",
                'ekman_depth': "ğŸ“ Ekman Depth:",
                'total_transport': "ğŸŒŠ Total Transport:",
                'energy_transfer': "âš¡ Energy Transfer:",
                'calc_message': "Click Calculate & Visualize button",
                
                // ì§€ì—­ ì„ íƒ
                'loc_custom': "ğŸ¯ Custom Settings",
                'loc_los_angeles': "ğŸ‡ºğŸ‡¸ Los Angeles",
                'loc_busan': "ğŸ‡°ğŸ‡· Busan",
                'loc_north_pacific': "ğŸŒŠ North Pacific",
                'loc_north_atlantic': "ğŸŒŠ North Atlantic", 
                'loc_southern_ocean': "ğŸ§Š Southern Ocean",
                'loc_equator': "ğŸ”† Equator",
                
                // ì°¨íŠ¸ ì œëª©
                'chart_title_3d': "ï¿½ï¿½ 3D Ekman Transport Visualization",
                'chart_title_2d': "ğŸŒŠ Ekman Transport Visualization",
                'chart_title_mobile': "ğŸŒŠ Ekman Transport Visualization",
                
                // ë‹¨ìœ„
                'unit_ms': "m/s",
                'unit_degree': "Â°",
                'unit_meter': "m",
                'unit_wind_stress': "mN/mÂ²",
                'unit_transport': "mÂ³/s",
                'unit_energy': "mW/mÂ²",
                'footer_project_title': "Ekman Transport Visualizer",
                'footer_features_title': "Features",
                'footer_tech_title': "Technical Info",
                'footer_contact_title': "Contact & Support",
                'footer_project_desc': "A professional tool for visualizing oceanographic phenomena. Analyzes wind-ocean current interactions based on Ekman transport theory.",
                'footer_feature1': "Normal Wind Condition Simulation",
                'footer_feature2': "Strong Wind Analysis",
                'footer_feature3': "Typhoon Condition Modeling",
                'footer_feature4': "3D Visualization",
                'footer_feature5': "2D Analysis Charts",
                'footer_feature6': "Export Results",
                'footer_tech1': "Ekman Transport Theory",
                'footer_tech2': "Coriolis Effect",
                'footer_tech3': "Ekman Spiral",
                'footer_tech4': "Wind Stress Calculation",
                'footer_tech5': "Vertical Turbulence Modeling",
                'footer_contact1': "pistolinkr@icloud.com",
                'footer_contact2': "https://github.com/pistolinkr",
                'footer_contact3': "Oceanography Research Community",
                'footer_contact4': "Tech Support: 24/7",
                'solution_title': "Solutions & Usage Guide",
                'solution_quick_start': "Quick Start Guide",
                'solution_advanced_usage': "Advanced Usage",
                'solution_troubleshooting': "Troubleshooting",
                'solution_best_practices': "Best Practices",
                'solution_case_studies': "Case Studies",
                'solution_quick_start_title': "Quick Start Guide",
                'solution_quick_start_desc': "Step-by-step guide for first-time users of the Ekman Transport Visualization tool.",
                'solution_step1_title': "Step 1: Basic Settings",
                'solution_step2_title': "Step 2: Visualization Type Selection",
                'solution_step3_title': "Step 3: Using Presets",
                'solution_step4_title': "Step 4: Calculation and Results",
                'solution_advanced_title': "Advanced Usage",
                'solution_advanced_desc': "Methods for utilizing advanced features for professional oceanographic analysis.",
                'solution_trouble_title': "Troubleshooting Guide",
                'solution_trouble_desc': "Common problems and their solutions.",
                'solution_best_title': "Best Practices",
                'solution_best_desc': "Best practices for accurate and meaningful analysis.",
                'solution_case_title': "Case Studies",
                'solution_case_desc': "Concrete examples that can be utilized in actual oceanographic research."
            },
            'ko': {
                // UI ìš”ì†Œë“¤
                'app_title': "ì—í¬ë§Œ ìˆ˜ì†¡ ì‹œê°í™”",
                'language_select': "ğŸŒ ì–¸ì–´ ì„ íƒ",
                'param_settings': "ğŸ›ï¸ íŒŒë¼ë¯¸í„° ì„¤ì •",
                'wind_speed': "ğŸŒ¬ï¸ ë°”ëŒ ì†ë„ (m/s)",
                'wind_direction': "ğŸ§­ ë°”ëŒ ë°©í–¥ (Â°)",
                'latitude': "ğŸŒ ìœ„ë„ (Â°)",
                'depth': "ğŸŒŠ ê¹Šì´ (m)",
                'vis_type': "ğŸ“Š ì‹œê°í™” íƒ€ì…",
                'vis_3d': "ğŸ”® 3D",
                'vis_2d': "ğŸ“ˆ 2D",
                'preset_settings': "âš¡ ì‚¬ì „ ì„¤ì •",
                'preset_normal': "ğŸŒ¤ï¸ ì¼ë°˜",
                'preset_strong': "ğŸ’¨ ê°•í’",
                'preset_typhoon': "ğŸŒªï¸ íƒœí’",
                'location_select': "ğŸ—ºï¸ ì§€ì—­ ì„ íƒ",
                'calc_button': "ğŸ”„ ê³„ì‚° ë° ì‹œê°í™”",
                'export_button': "ğŸ’¾ ë‚´ë³´ë‚´ê¸°",
                'results_title': "ğŸ“‹ ê³„ì‚° ê²°ê³¼",
                'wind_stress': "ğŸ’¨ ë°”ëŒ ì‘ë ¥:",
                'ekman_depth': "ğŸ“ ì—í¬ë§Œ ê¹Šì´:",
                'total_transport': "ğŸŒŠ ì´ ìˆ˜ì†¡ëŸ‰:",
                'energy_transfer': "âš¡ ì—ë„ˆì§€ ì „ë‹¬ë¥ :",
                'calc_message': "ê³„ì‚° ë° ì‹œê°í™” ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”",
                
                // ì§€ì—­ ì„ íƒ
                'loc_custom': "ğŸ¯ ì‚¬ìš©ì ì„¤ì •",
                'loc_los_angeles': "ğŸ‡ºğŸ‡¸ ë¡œìŠ¤ì•¤ì ¤ë ˆìŠ¤",
                'loc_busan': "ğŸ‡°ğŸ‡· ë¶€ì‚°",
                'loc_north_pacific': "ğŸŒŠ ë¶íƒœí‰ì–‘",
                'loc_north_atlantic': "ğŸŒŠ ë¶ëŒ€ì„œì–‘",
                'loc_southern_ocean': "ğŸ§Š ë‚¨ê·¹í•´",
                'loc_equator': "ğŸ”† ì ë„",
                
                // ì°¨íŠ¸ ì œëª©
                'chart_title_3d': "ğŸŒŠ 3D ì—í¬ë§Œ ìˆ˜ì†¡ ì‹œê°í™”",
                'chart_title_2d': "ğŸŒŠ ì—í¬ë§Œ ìˆ˜ì†¡ ì‹œê°í™”",
                'chart_title_mobile': "ğŸŒŠ ì—í¬ë§Œ ìˆ˜ì†¡ ì‹œê°í™”",
                
                // ë‹¨ìœ„
                'unit_ms': "m/s",
                'unit_degree': "Â°",
                'unit_meter': "m",
                'unit_wind_stress': "mN/mÂ²",
                'unit_transport': "mÂ³/s",
                'unit_energy': "mW/mÂ²",
                'footer_project_title': "ì—í¬ë§Œ ìˆ˜ì†¡ ì‹œê°í™”",
                'footer_features_title': "ê¸°ëŠ¥",
                'footer_tech_title': "ê¸°ìˆ  ì •ë³´",
                'footer_contact_title': "ì—°ë½ì²˜ ë° ì§€ì›",
                'footer_project_desc': "í•´ì–‘í•™ì  í˜„ìƒì„ ì‹œê°í™”í•˜ëŠ” ì „ë¬¸ ë„êµ¬ì…ë‹ˆë‹¤. ì—í¬ë§Œ ìˆ˜ì†¡ ì´ë¡ ì„ ê¸°ë°˜ìœ¼ë¡œ ë°”ëŒê³¼ í•´ë¥˜ì˜ ìƒí˜¸ì‘ìš©ì„ ë¶„ì„í•©ë‹ˆë‹¤.",
                'footer_feature1': "ì¼ë°˜ ë°”ëŒ ì¡°ê±´ ì‹œë®¬ë ˆì´ì…˜",
                'footer_feature2': "ê°•í’ ì¡°ê±´ ë¶„ì„",
                'footer_feature3': "íƒœí’ ì¡°ê±´ ëª¨ë¸ë§",
                'footer_feature4': "3D ì‹œê°í™”",
                'footer_feature5': "2D ë¶„ì„ ì°¨íŠ¸",
                'footer_feature6': "ê²°ê³¼ ë‚´ë³´ë‚´ê¸°",
                'footer_tech1': "ì—í¬ë§Œ ìˆ˜ì†¡ ì´ë¡ ",
                'footer_tech2': "ì½”ë¦¬ì˜¬ë¦¬ íš¨ê³¼",
                'footer_tech3': "ì—í¬ë§Œ ë‚˜ì„ ",
                'footer_tech4': "ë°”ëŒ ì‘ë ¥ ê³„ì‚°",
                'footer_tech5': "ìˆ˜ì§ ë‚œë¥˜ ëª¨ë¸ë§",
                'footer_contact1': "pistolinkr@icloud.com",
                'footer_contact2': "https://github.com/pistolinkr",
                'footer_contact3': "í•´ì–‘í•™ ì—°êµ¬ ì»¤ë®¤ë‹ˆí‹°",
                'footer_contact4': "ê¸°ìˆ  ì§€ì›: 24/7",
                'solution_title': "ì†”ë£¨ì…˜ ë° ì‚¬ìš©ë²• ê°€ì´ë“œ",
                'solution_quick_start': "ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ",
                'solution_advanced_usage': "ê³ ê¸‰ ì‚¬ìš©ë²•",
                'solution_troubleshooting': "ë¬¸ì œ í•´ê²°",
                'solution_best_practices': "ëª¨ë²” ì‚¬ë¡€",
                'solution_case_studies': "ì‚¬ë¡€ ì—°êµ¬",
                'solution_quick_start_title': "ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ",
                'solution_quick_start_desc': "ì—í¬ë§Œ ìˆ˜ì†¡ ì‹œê°í™” ë„êµ¬ë¥¼ ì²˜ìŒ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ë“¤ì„ ìœ„í•œ ë‹¨ê³„ë³„ ê°€ì´ë“œì…ë‹ˆë‹¤.",
                'solution_step1_title': "1ë‹¨ê³„: ê¸°ë³¸ ì„¤ì •",
                'solution_step2_title': "2ë‹¨ê³„: ì‹œê°í™” íƒ€ì… ì„ íƒ",
                'solution_step3_title': "3ë‹¨ê³„: ì‚¬ì „ ì„¤ì • í™œìš©",
                'solution_step4_title': "4ë‹¨ê³„: ê³„ì‚° ë° ê²°ê³¼ í™•ì¸",
                'solution_advanced_title': "ê³ ê¸‰ ì‚¬ìš©ë²•",
                'solution_advanced_desc': "ì „ë¬¸ì ì¸ í•´ì–‘í•™ ë¶„ì„ì„ ìœ„í•œ ê³ ê¸‰ ê¸°ëŠ¥ë“¤ì„ í™œìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.",
                'solution_trouble_title': "ë¬¸ì œ í•´ê²° ê°€ì´ë“œ",
                'solution_trouble_desc': "ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ê³¼ í•´ê²° ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.",
                'solution_best_title': "ëª¨ë²” ì‚¬ë¡€",
                'solution_best_desc': "ì •í™•í•˜ê³  ì˜ë¯¸ ìˆëŠ” ë¶„ì„ì„ ìœ„í•œ ëª¨ë²” ì‚¬ë¡€ë“¤ì„ ì†Œê°œí•©ë‹ˆë‹¤.",
                'solution_case_title': "ì‚¬ë¡€ ì—°êµ¬",
                'solution_case_desc': "ì‹¤ì œ í•´ì–‘í•™ ì—°êµ¬ì—ì„œ í™œìš©í•  ìˆ˜ ìˆëŠ” êµ¬ì²´ì ì¸ ì‚¬ë¡€ë“¤ì„ ì†Œê°œí•©ë‹ˆë‹¤."
            },
            'zh': {
                // UI ìš”ì†Œë“¤
                'app_title': "åŸƒå…‹æ›¼è¾“è¿å¯è§†åŒ–",
                'language_select': "ğŸŒ è¯­è¨€é€‰æ‹©",
                'param_settings': "ğŸ›ï¸ å‚æ•°è®¾ç½®",
                'wind_speed': "ğŸŒ¬ï¸ é£é€Ÿ (m/s)",
                'wind_direction': "ğŸ§­ é£å‘ (Â°)",
                'latitude': "ğŸŒ çº¬åº¦ (Â°)",
                'depth': "ğŸŒŠ æ·±åº¦ (m)",
                'vis_type': "ğŸ“Š å¯è§†åŒ–ç±»å‹",
                'vis_3d': "ğŸ”® 3D",
                'vis_2d': "ğŸ“ˆ 2D",
                'preset_settings': "âš¡ é¢„è®¾è®¾ç½®",
                'preset_normal': "ğŸŒ¤ï¸ æ­£å¸¸",
                'preset_strong': "ğŸ’¨ å¼ºé£",
                'preset_typhoon': "ğŸŒªï¸ å°é£",
                'location_select': "ğŸ—ºï¸ ä½ç½®é€‰æ‹©",
                'calc_button': "ğŸ”„ è®¡ç®—ä¸å¯è§†åŒ–",
                'export_button': "ğŸ’¾ å¯¼å‡º",
                'results_title': "ğŸ“‹ è®¡ç®—ç»“æœ",
                'wind_stress': "ğŸ’¨ é£åº”åŠ›:",
                'ekman_depth': "ğŸ“ åŸƒå…‹æ›¼æ·±åº¦:",
                'total_transport': "ğŸŒŠ æ€»è¾“è¿é‡:",
                'energy_transfer': "âš¡ èƒ½é‡ä¼ è¾“ç‡:",
                'calc_message': "ç‚¹å‡»è®¡ç®—ä¸å¯è§†åŒ–æŒ‰é’®",
                
                // åœ°åŒºé€‰æ‹©
                'loc_custom': "ğŸ¯ è‡ªå®šä¹‰è®¾ç½®",
                'loc_los_angeles': "ğŸ‡ºğŸ‡¸ æ´›æ‰çŸ¶",
                'loc_busan': "ğŸ‡°ğŸ‡· é‡œå±±",
                'loc_north_pacific': "ğŸŒŠ åŒ—å¤ªå¹³æ´‹",
                'loc_north_atlantic': "ğŸŒŠ åŒ—å¤§è¥¿æ´‹",
                'loc_southern_ocean': "ğŸ§Š å—ææµ·",
                'loc_equator': "ğŸ”† èµ¤é“",
                
                // å›¾è¡¨æ ‡é¢˜
                'chart_title_3d': "ğŸŒŠ 3D åŸƒå…‹æ›¼è¾“è¿å¯è§†åŒ–",
                'chart_title_2d': "ğŸŒŠ åŸƒå…‹æ›¼è¾“è¿å¯è§†åŒ–",
                'chart_title_mobile': "ğŸŒŠ åŸƒå…‹æ›¼è¾“è¿å¯è§†åŒ–",
                
                // å•ä½
                'unit_ms': "m/s",
                'unit_degree': "Â°",
                'unit_meter': "m",
                'unit_wind_stress': "mN/mÂ²",
                'unit_transport': "mÂ³/s",
                'unit_energy': "mW/mÂ²",
                'footer_project_title': "åŸƒå…‹æ›¼è¾“è¿å¯è§†åŒ–",
                'footer_features_title': "åŠŸèƒ½",
                'footer_tech_title': "æŠ€æœ¯ä¿¡æ¯",
                'footer_contact_title': "è”ç³»ä¸æ”¯æŒ",
                'footer_project_desc': "æµ·æ´‹ç°è±¡å¯è§†åŒ–ä¸“ä¸šå·¥å…·ã€‚åŸºäºåŸƒå…‹æ›¼è¾“è¿ç†è®ºåˆ†æé£ä¸æµ·æµçš„ç›¸äº’ä½œç”¨ã€‚",
                'footer_feature1': "æ­£å¸¸é£å†µæ¨¡æ‹Ÿ",
                'footer_feature2': "å¼ºé£åˆ†æ",
                'footer_feature3': "å°é£æ¡ä»¶å»ºæ¨¡",
                'footer_feature4': "3Då¯è§†åŒ–",
                'footer_feature5': "2Dåˆ†æå›¾è¡¨",
                'footer_feature6': "å¯¼å‡ºç»“æœ",
                'footer_tech1': "åŸƒå…‹æ›¼è¾“è¿ç†è®º",
                'footer_tech2': "ç§‘é‡Œå¥¥åˆ©æ•ˆåº”",
                'footer_tech3': "åŸƒå…‹æ›¼èºæ—‹",
                'footer_tech4': "é£åº”åŠ›è®¡ç®—",
                'footer_tech5': "å‚ç›´æ¹æµå»ºæ¨¡",
                'footer_contact1': "pistolinkr@icloud.com",
                'footer_contact2': "https://github.com/pistolinkr",
                'footer_contact3': "æµ·æ´‹å­¦ç ”ç©¶ç¤¾åŒº",
                'footer_contact4': "æŠ€æœ¯æ”¯æŒ: 24/7",
                'solution_title': "è§£å†³æ–¹æ¡ˆå’Œä½¿ç”¨æŒ‡å—",
                'solution_quick_start': "å¿«é€Ÿå…¥é—¨æŒ‡å—",
                'solution_advanced_usage': "é«˜çº§ä½¿ç”¨æ–¹æ³•",
                'solution_troubleshooting': "æ•…éšœæ’é™¤",
                'solution_best_practices': "æœ€ä½³å®è·µ",
                'solution_case_studies': "æ¡ˆä¾‹ç ”ç©¶"
            },
            'ja': {
                // UI ìš”ì†Œë“¤
                'app_title': "ã‚¨ã‚¯ãƒãƒ³è¼¸é€å¯è¦–åŒ–",
                'language_select': "ğŸŒ è¨€èªé¸æŠ",
                'param_settings': "ğŸ›ï¸ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¨­å®š",
                'wind_speed': "ğŸŒ¬ï¸ é¢¨é€Ÿ (m/s)",
                'wind_direction': "ğŸ§­ é¢¨å‘ (Â°)",
                'latitude': "ğŸŒ ç·¯åº¦ (Â°)",
                'depth': "ğŸŒŠ æ·±åº¦ (m)",
                'vis_type': "ğŸ“Š å¯è¦–åŒ–ã‚¿ã‚¤ãƒ—",
                'vis_3d': "ğŸ”® 3D",
                'vis_2d': "ğŸ“ˆ 2D",
                'preset_settings': "âš¡ ãƒ—ãƒªã‚»ãƒƒãƒˆè¨­å®š",
                'preset_normal': "ğŸŒ¤ï¸ é€šå¸¸",
                'preset_strong': "ğŸ’¨ å¼·é¢¨",
                'preset_typhoon': "ğŸŒªï¸ å°é¢¨",
                'location_select': "ğŸ—ºï¸ å ´æ‰€é¸æŠ",
                'calc_button': "ğŸ”„ è¨ˆç®—ã¨å¯è¦–åŒ–",
                'export_button': "ğŸ’¾ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
                'results_title': "ğŸ“‹ è¨ˆç®—çµæœ",
                'wind_stress': "ğŸ’¨ é¢¨å¿œåŠ›:",
                'ekman_depth': "ğŸ“ ã‚¨ã‚¯ãƒãƒ³æ·±åº¦:",
                'total_transport': "ğŸŒŠ ç·è¼¸é€é‡:",
                'energy_transfer': "âš¡ ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¼é”ç‡:",
                'calc_message': "è¨ˆç®—ã¨å¯è¦–åŒ–ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",
                
                // åœ°åŸŸé¸æŠ
                'loc_custom': "ğŸ¯ ã‚«ã‚¹ã‚¿ãƒ è¨­å®š",
                'loc_los_angeles': "ğŸ‡ºğŸ‡¸ ãƒ­ã‚µãƒ³ã‚¼ãƒ«ã‚¹",
                'loc_busan': "ğŸ‡°ğŸ‡· é‡œå±±",
                'loc_north_pacific': "ğŸŒŠ åŒ—å¤ªå¹³æ´‹",
                'loc_north_atlantic': "ğŸŒŠ åŒ—å¤§è¥¿æ´‹",
                'loc_southern_ocean': "ğŸ§Š å—æ¥µæµ·",
                'loc_equator': "ğŸ”† èµ¤é“",
                
                // ãƒãƒ£ãƒ¼ãƒˆã‚¿ã‚¤ãƒˆãƒ«
                'chart_title_3d': "ğŸŒŠ 3D ã‚¨ã‚¯ãƒãƒ³è¼¸é€å¯è¦–åŒ–",
                'chart_title_2d': "ğŸŒŠ ã‚¨ã‚¯ãƒãƒ³è¼¸é€å¯è¦–åŒ–",
                'chart_title_mobile': "ğŸŒŠ ã‚¨ã‚¯ãƒãƒ³è¼¸é€å¯è¦–åŒ–",
                
                // å˜ä½
                'unit_ms': "m/s",
                'unit_degree': "Â°",
                'unit_meter': "m",
                'unit_wind_stress': "mN/mÂ²",
                'unit_transport': "mÂ³/s",
                'unit_energy': "mW/mÂ²",
                'footer_project_title': "ã‚¨ã‚¯ãƒãƒ³è¼¸é€å¯è¦–åŒ–",
                'footer_features_title': "æ©Ÿèƒ½",
                'footer_tech_title': "æŠ€è¡“æƒ…å ±",
                'footer_contact_title': "ãŠå•ã„åˆã‚ã›ã¨ã‚µãƒãƒ¼ãƒˆ",
                'footer_project_desc': "æµ·æ´‹ç¾è±¡ã‚’å¯è¦–åŒ–ã™ã‚‹å°‚é–€ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚¨ã‚¯ãƒãƒ³è¼¸é€ç†è«–ã«åŸºã¥ã„ã¦é¢¨ã¨æµ·æµã®ç›¸äº’ä½œç”¨ã‚’åˆ†æã—ã¾ã™ã€‚",
                'footer_feature1': "é€šå¸¸ã®é¢¨æ¡ä»¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³",
                'footer_feature2': "å¼·é¢¨åˆ†æ",
                'footer_feature3': "å°é¢¨æ¡ä»¶ãƒ¢ãƒ‡ãƒªãƒ³ã‚°",
                'footer_feature4': "3Då¯è¦–åŒ–",
                'footer_feature5': "2Dåˆ†æãƒãƒ£ãƒ¼ãƒˆ",
                'footer_feature6': "çµæœã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
                'footer_tech1': "ã‚¨ã‚¯ãƒãƒ³è¼¸é€ç†è«–",
                'footer_tech2': "ã‚³ãƒªã‚ªãƒªåŠ¹æœ",
                'footer_tech3': "ã‚¨ã‚¯ãƒãƒ³èºæ—‹",
                'footer_tech4': "é¢¨å¿œåŠ›è¨ˆç®—",
                'footer_tech5': "é‰›ç›´ä¹±æµãƒ¢ãƒ‡ãƒªãƒ³ã‚°",
                'footer_contact1': "pistolinkr@icloud.com",
                'footer_contact2': "https://github.com/pistolinkr",
                'footer_contact3': "æµ·æ´‹å­¦ç ”ç©¶ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£",
                'footer_contact4': "æŠ€è¡“ã‚µãƒãƒ¼ãƒˆ: 24/7",
                'solution_title': "ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ä½¿ç”¨ã‚¬ã‚¤ãƒ‰",
                'solution_quick_start': "ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰",
                'solution_advanced_usage': "é«˜åº¦ãªä½¿ç”¨æ–¹æ³•",
                'solution_troubleshooting': "ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°",
                'solution_best_practices': "ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹",
                'solution_case_studies': "ã‚±ãƒ¼ã‚¹ã‚¹ã‚¿ãƒ‡ã‚£"
            },
            'es': {
                // UI ìš”ì†Œë“¤
                'app_title': "Visualizador de Transporte de Ekman",
                'language_select': "ğŸŒ SelecciÃ³n de Idioma",
                'param_settings': "ğŸ›ï¸ ConfiguraciÃ³n de ParÃ¡metros",
                'wind_speed': "ğŸŒ¬ï¸ Velocidad del Viento (m/s)",
                'wind_direction': "ğŸ§­ DirecciÃ³n del Viento (Â°)",
                'latitude': "ğŸŒ Latitud (Â°)",
                'depth': "ğŸŒŠ Profundidad (m)",
                'vis_type': "ğŸ“Š Tipo de VisualizaciÃ³n",
                'vis_3d': "ğŸ”® 3D",
                'vis_2d': "ğŸ“ˆ 2D",
                'preset_settings': "âš¡ ConfiguraciÃ³n Predefinida",
                'preset_normal': "ğŸŒ¤ï¸ Normal",
                'preset_strong': "ğŸ’¨ Viento Fuerte",
                'preset_typhoon': "ğŸŒªï¸ TifÃ³n",
                'location_select': "ğŸ—ºï¸ SelecciÃ³n de UbicaciÃ³n",
                'calc_button': "ğŸ”„ Calcular y Visualizar",
                'export_button': "ğŸ’¾ Exportar",
                'results_title': "ğŸ“‹ Resultados del CÃ¡lculo",
                'wind_stress': "ğŸ’¨ Esfuerzo del Viento:",
                'ekman_depth': "ğŸ“ Profundidad de Ekman:",
                'total_transport': "ğŸŒŠ Transporte Total:",
                'energy_transfer': "âš¡ Transferencia de EnergÃ­a:",
                'calc_message': "Haga clic en Calcular y Visualizar",
                
                // SelecciÃ³n de regiÃ³n
                'loc_custom': "ğŸ¯ ConfiguraciÃ³n Personalizada",
                'loc_los_angeles': "ğŸ‡ºğŸ‡¸ Los Ãngeles",
                'loc_busan': "ğŸ‡°ğŸ‡· Busan",
                'loc_north_pacific': "ğŸŒŠ PacÃ­fico Norte",
                'loc_north_atlantic': "ğŸŒŠ AtlÃ¡ntico Norte",
                'loc_southern_ocean': "ğŸ§Š OcÃ©ano Austral",
                'loc_equator': "ğŸ”† Ecuador",
                
                // TÃ­tulos de grÃ¡ficos
                'chart_title_3d': "ğŸŒŠ VisualizaciÃ³n 3D del Transporte de Ekman",
                'chart_title_2d': "ğŸŒŠ VisualizaciÃ³n del Transporte de Ekman",
                'chart_title_mobile': "ğŸŒŠ VisualizaciÃ³n del Transporte de Ekman",
                
                // Unidades
                'unit_ms': "m/s",
                'unit_degree': "Â°",
                'unit_meter': "m",
                'unit_wind_stress': "mN/mÂ²",
                'unit_transport': "mÂ³/s",
                'unit_energy': "mW/mÂ²",
                'footer_project_title': "Visualizador de Transporte de Ekman",
                'footer_features_title': "CaracterÃ­sticas",
                'footer_tech_title': "InformaciÃ³n TÃ©cnica",
                'footer_contact_title': "Contacto y Soporte",
                'footer_project_desc': "Herramienta profesional para visualizar fenÃ³menos oceanogrÃ¡ficos. Analiza las interacciones viento-corriente oceÃ¡nica basadas en la teorÃ­a del transporte de Ekman.",
                'footer_feature1': "SimulaciÃ³n de Condiciones Normales de Viento",
                'footer_feature2': "AnÃ¡lisis de Viento Fuerte",
                'footer_feature3': "Modelado de Condiciones de TifÃ³n",
                'footer_feature4': "VisualizaciÃ³n 3D",
                'footer_feature5': "GrÃ¡ficos de AnÃ¡lisis 2D",
                'footer_feature6': "Exportar Resultados",
                'footer_tech1': "TeorÃ­a del Transporte de Ekman",
                'footer_tech2': "Efecto Coriolis",
                'footer_tech3': "Espiral de Ekman",
                'footer_tech4': "CÃ¡lculo del Esfuerzo del Viento",
                'footer_tech5': "Modelado de Turbulencia Vertical",
                'footer_contact1': "support@ekman-visualizer.com",
                'footer_contact2': "https://ekman-visualizer.github.io",
                'footer_contact3': "Comunidad de InvestigaciÃ³n OceanogrÃ¡fica",
                'footer_contact4': "Soporte TÃ©cnico: 24/7",
                'solution_title': "Soluciones y GuÃ­a de Uso",
                'solution_quick_start': "GuÃ­a de Inicio RÃ¡pido",
                'solution_advanced_usage': "Uso Avanzado",
                'solution_troubleshooting': "SoluciÃ³n de Problemas",
                'solution_best_practices': "Mejores PrÃ¡cticas",
                'solution_case_studies': "Estudios de Caso"
            },
            'ru': {
                // UI ìš”ì†Œë“¤
                'app_title': "Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                'language_select': "ğŸŒ Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¯Ğ·Ñ‹ĞºĞ°",
                'param_settings': "ğŸ›ï¸ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²",
                'wind_speed': "ğŸŒ¬ï¸ Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ’ĞµÑ‚Ñ€Ğ° (Ğ¼/Ñ)",
                'wind_direction': "ğŸ§­ ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ’ĞµÑ‚Ñ€Ğ° (Â°)",
                'latitude': "ğŸŒ Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ° (Â°)",
                'depth': "ğŸŒŠ Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° (Ğ¼)",
                'vis_type': "ğŸ“Š Ğ¢Ğ¸Ğ¿ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸",
                'vis_3d': "ğŸ”® 3D",
                'vis_2d': "ğŸ“ˆ 2D",
                'preset_settings': "âš¡ ĞŸÑ€ĞµĞ´ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸",
                'preset_normal': "ğŸŒ¤ï¸ ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾",
                'preset_strong': "ğŸ’¨ Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ’ĞµÑ‚ĞµÑ€",
                'preset_typhoon': "ğŸŒªï¸ Ğ¢Ğ°Ğ¹Ñ„ÑƒĞ½",
                'location_select': "ğŸ—ºï¸ Ğ’Ñ‹Ğ±Ğ¾Ñ€ ĞœĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ",
                'calc_button': "ğŸ”„ Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
                'export_button': "ğŸ’¾ Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚",
                'results_title': "ğŸ“‹ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ Ğ°ÑÑ‡ĞµÑ‚Ğ°",
                'wind_stress': "ğŸ’¨ ĞĞ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ Ğ’ĞµÑ‚Ñ€Ğ°:",
                'ekman_depth': "ğŸ“ Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°:",
                'total_transport': "ğŸŒŠ ĞĞ±Ñ‰Ğ¸Ğ¹ ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ:",
                'energy_transfer': "âš¡ ĞŸĞµÑ€ĞµĞ´Ğ°Ñ‡Ğ° Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ğ¸:",
                'calc_message': "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
                
                // Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ğ°
                'loc_custom': "ğŸ¯ ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸",
                'loc_los_angeles': "ğŸ‡ºğŸ‡¸ Ğ›Ğ¾Ñ-ĞĞ½Ğ´Ğ¶ĞµĞ»ĞµÑ",
                'loc_busan': "ğŸ‡°ğŸ‡· ĞŸÑƒÑĞ°Ğ½",
                'loc_north_pacific': "ğŸŒŠ Ğ¡ĞµĞ²ĞµÑ€Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ Ğ¢Ğ¸Ñ…Ğ¾Ğ³Ğ¾ Ğ¾ĞºĞµĞ°Ğ½Ğ°",
                'loc_north_atlantic': "ğŸŒŠ Ğ¡ĞµĞ²ĞµÑ€Ğ½Ğ°Ñ ĞÑ‚Ğ»Ğ°Ğ½Ñ‚Ğ¸ĞºĞ°",
                'loc_southern_ocean': "ğŸ§Š Ğ®Ğ¶Ğ½Ñ‹Ğ¹ Ğ¾ĞºĞµĞ°Ğ½",
                'loc_equator': "ğŸ”† Ğ­ĞºĞ²Ğ°Ñ‚Ğ¾Ñ€",
                
                // Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¾Ğ²
                'chart_title_3d': "ğŸŒŠ 3D Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                'chart_title_2d': "ğŸŒŠ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                'chart_title_mobile': "ğŸŒŠ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                
                // Ğ•Ğ´Ğ¸Ğ½Ğ¸Ñ†Ñ‹ Ğ¸Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ñ
                'unit_ms': "Ğ¼/Ñ",
                'unit_degree': "Â°",
                'unit_meter': "Ğ¼",
                'unit_wind_stress': "Ğ¼Ğ/Ğ¼Â²",
                'unit_transport': "Ğ¼Â³/Ñ",
                'unit_energy': "Ğ¼Ğ’Ñ‚/Ğ¼Â²",
                'footer_project_title': "Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€ ĞŸĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                'footer_features_title': "Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸",
                'footer_tech_title': "Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ",
                'footer_contact_title': "ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°",
                'footer_project_desc': "ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ĞºĞµĞ°Ğ½Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ÑĞ²Ğ»ĞµĞ½Ğ¸Ğ¹. ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ²ĞµÑ‚Ñ€Ğ° Ğ¸ Ğ¾ĞºĞµĞ°Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ‚ĞµĞ¾Ñ€Ğ¸Ğ¸ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°.",
                'footer_feature1': "Ğ¡Ğ¸Ğ¼ÑƒĞ»ÑÑ†Ğ¸Ñ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ²ĞµÑ‚Ñ€Ğ¾Ğ²Ñ‹Ñ… ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹",
                'footer_feature2': "ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¸Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²ĞµÑ‚Ñ€Ğ°",
                'footer_feature3': "ĞœĞ¾Ğ´ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğ¹ Ñ‚Ğ°Ğ¹Ñ„ÑƒĞ½Ğ°",
                'footer_feature4': "3D Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ",
                'footer_feature5': "2D ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸",
                'footer_feature6': "Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²",
                'footer_tech1': "Ğ¢ĞµĞ¾Ñ€Ğ¸Ñ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ° Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                'footer_tech2': "Ğ­Ñ„Ñ„ĞµĞºÑ‚ ĞšĞ¾Ñ€Ğ¸Ğ¾Ğ»Ğ¸ÑĞ°",
                'footer_tech3': "Ğ¡Ğ¿Ğ¸Ñ€Ğ°Ğ»ÑŒ Ğ­ĞºĞ¼Ğ°Ğ½Ğ°",
                'footer_tech4': "Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ñ Ğ²ĞµÑ‚Ñ€Ğ°",
                'footer_tech5': "ĞœĞ¾Ğ´ĞµĞ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ĞµÑ€Ñ‚Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ‚ÑƒÑ€Ğ±ÑƒĞ»ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸",
                'footer_contact1': "pistolinkr@icloud.com",
                'footer_contact2': "https://github.com/pistolinkr",
                'footer_contact3': "Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµÑÑ‚Ğ²Ğ¾ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ¾ĞºĞµĞ°Ğ½Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ğ¸",
                'footer_contact4': "Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°: 24/7",
                'solution_title': "Ğ ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¸ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ",
                'solution_quick_start': "Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚",
                'solution_advanced_usage': "ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ",
                'solution_troubleshooting': "Ğ£ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ½ĞµĞ¿Ğ¾Ğ»Ğ°Ğ´Ğ¾Ğº",
                'solution_best_practices': "Ğ›ÑƒÑ‡ÑˆĞ¸Ğµ Ğ¿Ñ€Ğ°ĞºÑ‚Ğ¸ĞºĞ¸",
                'solution_case_studies': "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"
            }
        };
        
        // í˜„ì¬ ì–¸ì–´ ì„¤ì • (ê¸°ë³¸ê°’: í•œêµ­ì–´)
        let currentLanguage = localStorage.getItem('ekman_language') || 'ko';
        
        // ë²ˆì—­ í•¨ìˆ˜
        function t(key) {
            return translations[currentLanguage][key] || translations['en'][key] || key;
        }
        
        // UI í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateUITexts() {
            // ì œëª© ë°”
            document.querySelector('.title-bar').textContent = t('app_title');
            
            // í‘¸í„° í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            updateFooterTexts();
            
            // ëª¨ë°”ì¼ ë©”ë‰´ ì œëª© (ê°„ë‹¨í•˜ê²Œ ì œì–´íŒìœ¼ë¡œ í†µì¼)
            const mobileMenuTitle = currentLanguage === 'ko' ? 'âš™ï¸ ì œì–´íŒ' :
                                   currentLanguage === 'zh' ? 'âš™ï¸ æ§åˆ¶é¢æ¿' :
                                   currentLanguage === 'ja' ? 'âš™ï¸ ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ«' :
                                   currentLanguage === 'es' ? 'âš™ï¸ Panel de Control' :
                                   currentLanguage === 'ru' ? 'âš™ï¸ ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ' :
                                   'âš™ï¸ Control Panel';
            document.querySelector('.mobile-menu-title').textContent = mobileMenuTitle;
            
            // ë¼ë²¨í”„ë ˆì„ ì œëª©ë“¤
            document.querySelectorAll('.labelframe-title').forEach((element, index) => {
                const titles = [
                    'language_select',
                    'param_settings', 
                    'vis_type',
                    'preset_settings',
                    'location_select',
                    '', // ë²„íŠ¼ ê·¸ë£¹
                    'results_title'
                ];
                if (titles[index]) {
                    element.textContent = t(titles[index]);
                }
            });
            
            // ìŠ¬ë¼ì´ë” ë¼ë²¨ë“¤
            document.querySelector('label[for="wind_speed"]').textContent = t('wind_speed') + ':';
            document.querySelector('label[for="wind_direction"]').textContent = t('wind_direction') + ':';
            document.querySelector('label[for="latitude"]').textContent = t('latitude') + ':';
            document.querySelector('label[for="depth"]').textContent = t('depth') + ':';
            
            // ë¼ë””ì˜¤ ë²„íŠ¼ ë¼ë²¨ë“¤
            document.querySelector('label[for="vis_3d"]').textContent = t('vis_3d');
            document.querySelector('label[for="vis_2d"]').textContent = t('vis_2d');
            
            // ë²„íŠ¼ë“¤
            document.querySelectorAll('.tk-button').forEach(button => {
                const text = button.textContent.trim();
                if (text.includes('ì¼ë°˜') || text.includes('Normal') || text.includes('æ­£å¸¸') || text.includes('é€šå¸¸') || text.includes('ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾') || text.includes('ğŸŒ¤ï¸')) {
                    button.textContent = t('preset_normal');
                } else if (text.includes('ê°•í’') || text.includes('Strong Wind') || text.includes('å¼ºé£') || text.includes('å¼·é¢¨') || text.includes('Viento Fuerte') || text.includes('Ğ¡Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ’ĞµÑ‚ĞµÑ€') || text.includes('ğŸ’¨')) {
                    button.textContent = t('preset_strong');
                } else if (text.includes('íƒœí’') || text.includes('Typhoon') || text.includes('å°é£') || text.includes('å°é¢¨') || text.includes('TifÃ³n') || text.includes('Ğ¢Ğ°Ğ¹Ñ„ÑƒĞ½') || text.includes('ğŸŒªï¸')) {
                    button.textContent = t('preset_typhoon');
                } else if (text.includes('ê³„ì‚°') || text.includes('Calculate') || text.includes('è®¡ç®—') || text.includes('è¨ˆç®—') || text.includes('Calcular') || text.includes('Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ') || text.includes('ğŸ”„')) {
                    button.textContent = t('calc_button');
                } else if (text.includes('ë‚´ë³´ë‚´ê¸°') || text.includes('Export') || text.includes('å¯¼å‡º') || text.includes('ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ') || text.includes('Exportar') || text.includes('Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚') || text.includes('ğŸ’¾')) {
                    button.textContent = t('export_button');
                }
            });
            
            // ê²°ê³¼ ë¼ë²¨ë“¤
            document.querySelectorAll('.result-label').forEach((element, index) => {
                const labels = ['wind_stress', 'ekman_depth', 'total_transport', 'energy_transfer'];
                if (labels[index]) {
                    element.textContent = t(labels[index]);
                }
            });
            
            // ì§€ì—­ ì„ íƒ ì˜µì…˜ë“¤
            const locationOptions = document.querySelectorAll('#location option');
            const locationKeys = ['loc_custom', 'loc_los_angeles', 'loc_busan', 'loc_north_pacific', 'loc_north_atlantic', 'loc_southern_ocean', 'loc_equator'];
            locationOptions.forEach((option, index) => {
                if (locationKeys[index]) {
                    option.textContent = t(locationKeys[index]);
                }
            });
            
            // í”Œë¡¯ ì˜ì—­ ê¸°ë³¸ ë©”ì‹œì§€
            const plotMessage = document.querySelector('#plot-area > div > p');
            if (plotMessage) {
                plotMessage.textContent = t('calc_message');
            }
            
            console.log(`ğŸŒ ${currentLanguage === 'ko' ? 'ì–¸ì–´ê°€' :
                              currentLanguage === 'zh' ? 'è¯­è¨€å·²åˆ‡æ¢ä¸º' :
                              currentLanguage === 'ja' ? 'è¨€èªãŒ' :
                              currentLanguage === 'es' ? 'Idioma cambiado a' :
                              currentLanguage === 'ru' ? 'Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ°' :
                              'Language changed to'} ${currentLanguage}${currentLanguage === 'ko' ? 'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.' :
                                                                                                      currentLanguage === 'zh' ? '' :
                                                                                                      currentLanguage === 'ja' ? 'ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚' :
                                                                                                      currentLanguage === 'es' ? '' :
                                                                                                      currentLanguage === 'ru' ? '' :
                                                                                                      ''}`);
        }
        
        // í‘¸í„° í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateFooterTexts() {
            const footer = document.querySelector('.footer');
            if (!footer) return;
            // translationsì— í‘¸í„° ê´€ë ¨ í…ìŠ¤íŠ¸ ì¶”ê°€
            const footerT = translations[currentLanguage] || translations['en'];
            // ì„¹ì…˜ ì œëª©
            const sectionTitles = footer.querySelectorAll('.footer-section h3');
            if (sectionTitles.length >= 4) {
                sectionTitles[0].innerHTML = `ğŸŒŠ ${footerT['footer_project_title'] || 'Ekman Transport Visualizer'}`;
                sectionTitles[1].innerHTML = `âš¡ ${footerT['footer_features_title'] || 'Features'}`;
                sectionTitles[2].innerHTML = `ğŸ”¬ ${footerT['footer_tech_title'] || 'Technical Info'}`;
                sectionTitles[3].innerHTML = `ğŸ“ ${footerT['footer_contact_title'] || 'Contact & Support'}`;
            }
            // í”„ë¡œì íŠ¸ ì„¤ëª…
            const projectDesc = footer.querySelector('.footer-section p');
            if (projectDesc) {
                projectDesc.textContent = footerT['footer_project_desc'] || 'A professional tool for visualizing oceanographic phenomena. Analyzes wind-ocean current interactions based on Ekman transport theory.';
            }
            // ì£¼ìš” ê¸°ëŠ¥
            const featureLinks = footer.querySelectorAll('.footer-section:nth-child(2) .footer-links a');
            const featureTexts = [
                footerT['footer_feature1'] || 'Normal Wind Condition Simulation',
                footerT['footer_feature2'] || 'Strong Wind Analysis',
                footerT['footer_feature3'] || 'Typhoon Condition Modeling',
                footerT['footer_feature4'] || '3D Visualization',
                footerT['footer_feature5'] || '2D Analysis Charts',
                footerT['footer_feature6'] || 'Export Results'
            ];
            featureLinks.forEach((link, i) => { if (featureTexts[i]) link.textContent = featureTexts[i]; });
            // ê¸°ìˆ  ì •ë³´
            const techLinks = footer.querySelectorAll('.footer-section:nth-child(3) .footer-links a');
            const techTexts = [
                footerT['footer_tech1'] || 'Ekman Transport Theory',
                footerT['footer_tech2'] || 'Coriolis Effect',
                footerT['footer_tech3'] || 'Ekman Spiral',
                footerT['footer_tech4'] || 'Wind Stress Calculation',
                footerT['footer_tech5'] || 'Vertical Turbulence Modeling'
            ];
            techLinks.forEach((link, i) => { if (techTexts[i]) link.textContent = techTexts[i]; });
            // ì—°ë½ì²˜
            const contactItems = footer.querySelectorAll('.footer-contact .contact-item span');
            const contactTexts = [
                footerT['footer_contact1'] || 'support@ekman-visualizer.com',
                footerT['footer_contact2'] || 'https://ekman-visualizer.github.io',
                footerT['footer_contact3'] || 'Oceanography Research Community',
                footerT['footer_contact4'] || 'Tech Support: 24/7'
            ];
            contactItems.forEach((span, i) => {
                if (contactTexts[i]) {
                    if (i === 0) {
                        // ì´ë©”ì¼ í•˜ì´í¼ë§í¬
                        const email = contactTexts[i];
                        span.innerHTML = `<a href=\"mailto:${email}\">${email}</a>`;
                    } else if (i === 1) {
                        // ê¹ƒí—ˆë¸Œ í•˜ì´í¼ë§í¬
                        const url = contactTexts[i];
                        span.innerHTML = `<a href=\"${url}\" target=\"_blank\" rel=\"noopener\">${url}</a>`;
                    } else if (i === 2) {
                        // í•´ì–‘í•™ ì—°êµ¬ ì»¤ë®¤ë‹ˆí‹° í•˜ì´í¼ë§í¬
                        const communityText = contactTexts[i];
                        span.innerHTML = `<a href=\"https://www.ksocean.or.kr/community/board.asp?boardID=1\" target=\"_blank\" rel=\"noopener\">${communityText}</a>`;
                    } else {
                        span.textContent = contactTexts[i];
                    }
                }
            });
            
            // ì†”ë£¨ì…˜ íƒ­ ë§í¬ë“¤ ì—…ë°ì´íŠ¸
            const solutionLinks = footer.querySelectorAll('.footer-section:nth-child(4) .footer-links a');
            const solutionTexts = [
                footerT['solution_quick_start'] || 'Quick Start Guide',
                footerT['solution_advanced_usage'] || 'Advanced Usage',
                footerT['solution_troubleshooting'] || 'Troubleshooting',
                footerT['solution_best_practices'] || 'Best Practices',
                footerT['solution_case_studies'] || 'Case Studies'
            ];
            solutionLinks.forEach((link, i) => { 
                if (solutionTexts[i]) {
                    if (i === 0) {
                        link.textContent = `ğŸ“– ${solutionTexts[i]}`;
                    } else if (i === 1) {
                        link.textContent = `ğŸš€ ${solutionTexts[i]}`;
                    } else if (i === 2) {
                        link.textContent = `ğŸ”¬ ${solutionTexts[i]}`;
                    } else if (i === 3) {
                        link.textContent = `ğŸ”§ ${solutionTexts[i]}`;
                    } else if (i === 4) {
                        link.textContent = `â­ ${solutionTexts[i]}`;
                    } else if (i === 5) {
                        link.textContent = `ğŸ“Š ${solutionTexts[i]}`;
                    }
                }
            });
        }
        
        // ì–¸ì–´ ë³€ê²½ í•¨ìˆ˜
        function changeLanguage(newLanguage) {
            currentLanguage = newLanguage;
            localStorage.setItem('ekman_language', newLanguage);
            updateUITexts();
            
            // ê¸°ì¡´ ê³„ì‚° ê²°ê³¼ê°€ ìˆë‹¤ë©´ ë²ˆì—­ëœ ì–¸ì–´ë¡œ ì—…ë°ì´íŠ¸
            if (currentResults) {
                updateResultsDisplay(currentResults);
            }
            
            // ì°¨íŠ¸ê°€ ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆë‹¤ë©´ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
            if (currentResults) {
                const visType = document.querySelector('input[name="vis_type"]:checked').value;
                let plotData;
                let config;
                
                if (isMobile()) {
                    if (visType === '3d') {
                        plotData = create3DPlot(currentResults);
                    } else {
                        plotData = createMobile2DPlot(currentResults);
                    }
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true,
                        scrollZoom: true,
                        doubleClick: 'reset',
                        touchAction: 'auto'
                    };
                } else if (isTablet()) {
                    if (visType === '3d') {
                        plotData = create3DPlot(currentResults);
                    } else {
                        plotData = create2DPlot(currentResults);
                    }
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true
                    };
                } else {
                    if (visType === '3d') {
                        plotData = create3DPlot(currentResults);
                    } else {
                        plotData = create2DPlot(currentResults);
                    }
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true
                    };
                }
                
                document.getElementById('plot-area').innerHTML = '';
                Plotly.newPlot('plot-area', plotData.data, plotData.layout, config);
            }
        }
        
        // ì „ì—­ ë³€ìˆ˜
        let currentResults = null;
        
        // ìœ„ì¹˜ ë°ì´í„°
        const LOCATIONS = {
            'los_angeles': {lat: 34.0, wind: 3.0, wind_dir: 270},
            'busan': {lat: 35.1, wind: 3.5, wind_dir: 135},
            'north_pacific': {lat: 45.0, wind: 6.0, wind_dir: 135},
            'north_atlantic': {lat: 50.0, wind: 8.0, wind_dir: 270},
            'southern_ocean': {lat: 60.0, wind: 11.0, wind_dir: 270}, // ì ˆëŒ“ê°’ìœ¼ë¡œ ë³€ê²½
            'equator': {lat: 2.0, wind: 2.0, wind_dir: 90}
        };
        
        // ë¬¼ë¦¬ ìƒìˆ˜
        const RHO_WATER = 1025;  // kg/mÂ³
        const RHO_AIR = 1.225;   // kg/mÂ³
        const CD = 0.0013;       // í•­ë ¥ ê³„ìˆ˜
        const OMEGA = 7.2921e-5; // ì§€êµ¬ ìì „ ê°ì†ë„ (rad/s)
        
        // ìŠ¬ë¼ì´ë” ê°’ ì—…ë°ì´íŠ¸
        function updateSliderValues() {
            document.getElementById('wind_speed_value').textContent = parseFloat(document.getElementById('wind_speed').value).toFixed(1);
            document.getElementById('wind_direction_value').textContent = parseFloat(document.getElementById('wind_direction').value).toFixed(0);
            // ìœ„ë„ ê°’ì„ ìŒìˆ˜ë¡œ í‘œì‹œ
            const latitudeValue = parseFloat(document.getElementById('latitude').value);
            document.getElementById('latitude_value').textContent = (-latitudeValue).toFixed(0);
            document.getElementById('depth_value').textContent = parseFloat(document.getElementById('depth').value).toFixed(0);
        }
        
        // ì‚¬ì „ ì„¤ì •
        function setPreset(type) {
            if (type === 'normal') {
                document.getElementById('wind_speed').value = 10.0;
                document.getElementById('wind_direction').value = 0;
                document.getElementById('latitude').value = 30;
                document.getElementById('depth').value = 100;
            } else if (type === 'strong') {
                document.getElementById('wind_speed').value = 20.0;
                document.getElementById('wind_direction').value = 45;
                document.getElementById('latitude').value = 45;
                document.getElementById('depth').value = 150;
            } else if (type === 'typhoon') {
                document.getElementById('wind_speed').value = 30.0;
                document.getElementById('wind_direction').value = 90;
                document.getElementById('latitude').value = 25;
                document.getElementById('depth').value = 200;
            }
            updateSliderValues();
        }
        
        // ì§€ì—­ ì„ íƒ
        function onLocationSelect() {
            const selected = document.getElementById('location').value;
            if (selected !== 'custom' && LOCATIONS[selected]) {
                const loc = LOCATIONS[selected];
                document.getElementById('latitude').value = Math.abs(loc.lat); // ì ˆëŒ“ê°’ìœ¼ë¡œ ì €ì¥
                document.getElementById('wind_speed').value = loc.wind;
                document.getElementById('wind_direction').value = loc.wind_dir;
                updateSliderValues();
            }
        }
        
        // ì½”ë¦¬ì˜¬ë¦¬ ë§¤ê°œë³€ìˆ˜ ê³„ì‚°
        function calculateCoriolisParameter(latitude) {
            return 2 * OMEGA * Math.sin(latitude * Math.PI / 180);
        }
        
        // ì—í¬ë§Œ ìˆ˜ì†¡ ê³„ì‚°
        function calculateEkmanTransport(windSpeed, windDirection, latitude, depth) {
            if (latitude === 0) latitude = 1e-6; // 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ë°©ì§€
            
            // ìœ„ë„ ê°’ì„ ìŒìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ê³„ì‚°
            const negativeLatitude = -latitude;
            const f = calculateCoriolisParameter(negativeLatitude);
            const windStress = RHO_AIR * CD * windSpeed * windSpeed;
            const windDirRad = windDirection * Math.PI / 180;
            
            const tauX = windStress * Math.cos(windDirRad);
            const tauY = windStress * Math.sin(windDirRad);
            
            const Mx = -tauY / (RHO_WATER * f);
            const My = tauX / (RHO_WATER * f);
            
            const K = 0.01; // ìˆ˜ì§ ë‚œë¥˜ ì ì„± ê³„ìˆ˜
            const ekmanDepth = Math.PI * Math.sqrt(2 * K / Math.abs(f));
            
            // ì—í¬ë§Œ ë‚˜ì„  ê³„ì‚°
            const zLevels = [];
            const uVel = [];
            const vVel = [];
            
            for (let i = 0; i < 50; i++) {
                const z = (depth / 49) * i;
                zLevels.push(z);
                
                const a = Math.sqrt(Math.abs(f) / (2 * K));
                const factor = Math.exp(-a * z) / (RHO_WATER * Math.sqrt(2 * K * Math.abs(f)));
                const cosAz = Math.cos(a * z);
                const sinAz = Math.sin(a * z);
                const sgnF = Math.sign(f);
                
                const u = factor * (tauX * cosAz - sgnF * tauY * sinAz);
                const v = factor * (sgnF * tauX * sinAz + tauY * cosAz);
                
                uVel.push(u);
                vVel.push(v);
            }
            
            const energyTransfer = tauX * uVel[0] + tauY * vVel[0];
            
            return {
                windSpeed, windDirection, latitude: negativeLatitude, depth, // ìœ„ë„ ê°’ì„ ìŒìˆ˜ë¡œ ë°˜í™˜
                windStress, tauX, tauY, Mx, My, ekmanDepth,
                zLevels, uVel, vVel, f, energyTransfer
            };
        }
        
        // í…Œë§ˆ ê°ì§€ í•¨ìˆ˜
        function isDarkMode() {
            return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        }
        
        // í…Œë§ˆì— ë”°ë¥¸ ìƒ‰ìƒ ë°˜í™˜
        function getThemeColors() {
            const dark = isDarkMode();
            return {
                background: dark ? '#2b2b2b' : 'white',
                paper: dark ? '#1e1e1e' : 'white',
                text: dark ? '#ffffff' : '#000000',
                grid: dark ? '#404040' : 'lightgray',
                font: dark ? '#e0e0e0' : '#333333'
            };
        }
        
        // ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ ê°ì§€
        function isMobile() {
            return window.innerWidth <= 767;
        }
        
        // íƒœë¸”ë¦¿ ë””ë°”ì´ìŠ¤ ê°ì§€
        function isTablet() {
            return window.innerWidth > 767 && window.innerWidth <= 1024;
        }
        
        // í–¥ìƒëœ ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
        function toggleMobileMenu() {
            const menuPanel = document.querySelector('.mobile-menu-panel');
            const overlay = document.querySelector('.mobile-menu-overlay');
            const toggleButton = document.querySelector('.mobile-menu-toggle');
            const body = document.body;
            
            const isActive = menuPanel.classList.contains('active');
            
            if (!isActive) {
                // ë©”ë‰´ ì—´ê¸°
                menuPanel.classList.add('active');
                overlay.classList.add('active');
                toggleButton.classList.add('active');
                body.classList.add('menu-open');
                toggleButton.setAttribute('aria-expanded', 'true');
                
                // í–„ë²„ê±° ë©”ë‰´ ì§„ë™ í”¼ë“œë°± (ì§€ì›í•˜ëŠ” ë””ë°”ì´ìŠ¤ì—ì„œ)
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
            
            // ë©”ë‰´ê°€ ì—´ë ¸ì„ ë•Œ í¬ì»¤ìŠ¤ ì„¤ì • (ì ‘ê·¼ì„± ê°œì„ )
                setTimeout(() => {
                    const firstMenuItem = menuPanel.querySelector('.mobile-menu-item input, .mobile-menu-item select, .mobile-menu-item button');
                    if (firstMenuItem) firstMenuItem.focus();
                }, 400);
                
                console.log("ğŸ“± ëª¨ë°”ì¼ ë©”ë‰´ ì—´ë¦¼");
                
            } else {
                // ë©”ë‰´ ë‹«ê¸°
                closeMobileMenu();
            }
        }
        
        // í–¥ìƒëœ ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸°
        function closeMobileMenu() {
            const menuPanel = document.querySelector('.mobile-menu-panel');
            const overlay = document.querySelector('.mobile-menu-overlay');
            const toggleButton = document.querySelector('.mobile-menu-toggle');
            const body = document.body;
            
            menuPanel.classList.remove('active');
            overlay.classList.remove('active');
            toggleButton.classList.remove('active');
            body.classList.remove('menu-open');
            toggleButton.setAttribute('aria-expanded', 'false');
            
            // ë©”ë‰´ê°€ ë‹«í˜”ì„ ë•Œ í–„ë²„ê±° ë²„íŠ¼ì— í¬ì»¤ìŠ¤ (ì ‘ê·¼ì„± ê°œì„ )
            setTimeout(() => {
                toggleButton.focus();
            }, 100);
            
            console.log("ğŸ“± ëª¨ë°”ì¼ ë©”ë‰´ ë‹«í˜");
        }
        
        // í–¥ìƒëœ ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ë¡œ ë©”ë‰´ ë‹«ê¸°
        function setupSwipeGesture() {
            const menuPanel = document.querySelector('.mobile-menu-panel');
            const swipeIndicator = document.querySelector('.swipe-indicator');
            let startX = 0;
            let currentX = 0;
            let isDragging = false;
            let swipeStarted = false;
            
            menuPanel.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                isDragging = true;
                swipeStarted = false;
            }, { passive: true });
            
            menuPanel.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                currentX = e.touches[0].clientX;
                const diffX = currentX - startX;
                
                // ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„í•˜ëŠ” ê²½ìš° (ë©”ë‰´ ë‹«ê¸°)
                if (diffX < -30 && !swipeStarted) {
                    swipeStarted = true;
                    swipeIndicator.classList.add('active');
                    
                    // ì§„ë™ í”¼ë“œë°±
                    if (navigator.vibrate) {
                        navigator.vibrate(20);
                    }
                }
                
                if (swipeStarted && diffX < 0) {
                    const progress = Math.abs(diffX) / 150; // 150px ê¸°ì¤€
                    const clampedProgress = Math.min(progress, 1);
                    
                    // ë¶€ë“œëŸ¬ìš´ ë³€í˜• ì ìš©
                    const translateX = Math.max(diffX * 0.5, -200);
                    menuPanel.style.transform = `translateX(${translateX}px)`;
                    menuPanel.style.opacity = 1 - (clampedProgress * 0.3);
                    
                    // ìŠ¤ì™€ì´í”„ ì§„í–‰ë¥ ì— ë”°ë¼ ì¸ë””ì¼€ì´í„° ìƒ‰ìƒ ë³€ê²½
                    const hue = 240 - (clampedProgress * 60); // íŒŒë€ìƒ‰ì—ì„œ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ
                    swipeIndicator.style.background = `linear-gradient(to bottom, transparent, hsl(${hue}, 70%, 60%), transparent)`;
                }
            }, { passive: true });
            
            menuPanel.addEventListener('touchend', function(e) {
                if (!isDragging) return;
                isDragging = false;
                swipeStarted = false;
                
                const diffX = currentX - startX;
                const swipeDistance = Math.abs(diffX);
                const swipeVelocity = swipeDistance / 300; // ê°„ë‹¨í•œ ì†ë„ ê³„ì‚°
                
                // ì¶©ë¶„íˆ ì™¼ìª½ìœ¼ë¡œ ìŠ¤ì™€ì´í”„í–ˆê±°ë‚˜ ë¹ ë¥¸ ì†ë„ë¡œ ìŠ¤ì™€ì´í”„í•œ ê²½ìš° ë©”ë‰´ ë‹«ê¸°
                if ((diffX < -100) || (diffX < -50 && swipeVelocity > 0.3)) {
                    // ì„±ê³µì ì¸ ìŠ¤ì™€ì´í”„ í”¼ë“œë°±
                    if (navigator.vibrate) {
                        navigator.vibrate([30, 50, 30]);
                    }
                    
                    closeMobileMenu();
                    console.log(`ğŸ“± ìŠ¤ì™€ì´í”„ë¡œ ë©”ë‰´ ë‹«ê¸° (ê±°ë¦¬: ${swipeDistance.toFixed(0)}px, ì†ë„: ${swipeVelocity.toFixed(2)})`);
                } else {
                    // ìŠ¤ì™€ì´í”„ ì·¨ì†Œ - ì›ë˜ ìœ„ì¹˜ë¡œ ë³µì›
                    if (navigator.vibrate) {
                        navigator.vibrate(10);
                    }
                }
                
                // ë³€í˜• ë° ì¸ë””ì¼€ì´í„° ì´ˆê¸°í™”
                menuPanel.style.transform = '';
                menuPanel.style.opacity = '';
                swipeIndicator.classList.remove('active');
                swipeIndicator.style.background = '';
                
            }, { passive: true });
            
            // ìŠ¤ì™€ì´í”„ ì·¨ì†Œ (í„°ì¹˜ê°€ ë©”ë‰´ ë°–ìœ¼ë¡œ ë‚˜ê°”ì„ ë•Œ)
            document.addEventListener('touchend', function(e) {
                if (isDragging && !menuPanel.contains(e.target)) {
                    isDragging = false;
                    swipeStarted = false;
                    menuPanel.style.transform = '';
                    menuPanel.style.opacity = '';
                    swipeIndicator.classList.remove('active');
                    swipeIndicator.style.background = '';
                }
            }, { passive: true });
        }
        
        // ëª¨ë°”ì¼ ìµœì í™” 2D ì‹œê°í™” ìƒì„± (ê°„ë‹¨í•œ ë‹¨ì¼ ì°¨íŠ¸)
        function createMobile2DPlot(results) {
            const colors = getThemeColors();
            const traces = [];
            
            // ëª¨ë°”ì¼ì—ì„œëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì •ë³´ë§Œ ê°„ë‹¨íˆ í‘œì‹œ
            // ì—í¬ë§Œ ë‚˜ì„  + ë°”ëŒ ë²¡í„°ë¥¼ í•˜ë‚˜ì˜ ì°¨íŠ¸ë¡œ
            
            // 1. ì—í¬ë§Œ ë‚˜ì„ 
            traces.push({
                x: results.uVel, 
                y: results.vVel,
                mode: 'lines+markers',
                line: {color: '#FF4081', width: 4},
                marker: {
                    size: 8,
                    color: results.zLevels,
                    colorscale: 'Viridis',
                    showscale: true,
                    colorbar: {
                        title: {text: t('depth'), font: {color: colors.text, size: 14}},
                        bgcolor: colors.background,
                        bordercolor: colors.grid,
                        tickfont: {color: colors.text, size: 12},
                        len: 0.6,
                        thickness: 20,
                        x: 1.02
                    }
                },
                name: currentLanguage === 'ko' ? 'ì—í¬ë§Œ ë‚˜ì„ ' :
                      currentLanguage === 'zh' ? 'åŸƒå…‹æ›¼èºçº¿' :
                      currentLanguage === 'ja' ? 'ã‚¨ã‚¯ãƒãƒ³èºæ—‹' :
                      currentLanguage === 'es' ? 'Espiral de Ekman' :
                      currentLanguage === 'ru' ? 'Ğ¡Ğ¿Ğ¸Ñ€Ğ°Ğ»ÑŒ Ğ­ĞºĞ¼Ğ°Ğ½Ğ°' :
                      'Ekman Spiral',
                hovertemplate: `${currentLanguage === 'ko' ? 'ê¹Šì´' :
                               currentLanguage === 'zh' ? 'æ·±åº¦' :
                               currentLanguage === 'ja' ? 'æ·±åº¦' :
                               currentLanguage === 'es' ? 'Profundidad' :
                               currentLanguage === 'ru' ? 'Ğ“Ğ»ÑƒĞ±Ğ¸Ğ½Ğ°' :
                               'Depth'}: %{marker.color:.1f}m<br>U: %{x:.4f}, V: %{y:.4f} m/s<extra></extra>`
            });
            
            // 2. ë°”ëŒ ë²¡í„° (ìŠ¤ì¼€ì¼ ì¡°ì •)
            const windDirRad = results.windDirection * Math.PI / 180;
            const windScale = Math.max(...results.uVel.map(Math.abs), ...results.vVel.map(Math.abs)) * 0.5;
            const windX = windScale * Math.cos(windDirRad);
            const windY = windScale * Math.sin(windDirRad);
            
            traces.push({
                x: [0, windX], 
                y: [0, windY],
                mode: 'lines+markers',
                line: {color: '#FF6B35', width: 6},
                marker: {size: 15, symbol: 'arrow', color: '#FF6B35'},
                name: `ğŸŒ¬ï¸ ${currentLanguage === 'ko' ? 'ë°”ëŒ' :
                            currentLanguage === 'zh' ? 'é£' :
                            currentLanguage === 'ja' ? 'é¢¨' :
                            currentLanguage === 'es' ? 'Viento' :
                            currentLanguage === 'ru' ? 'Ğ’ĞµÑ‚ĞµÑ€' :
                            'Wind'} ${results.windSpeed.toFixed(1)} m/s`,
                hovertemplate: `${currentLanguage === 'ko' ? 'ë°”ëŒì†ë„' :
                               currentLanguage === 'zh' ? 'é£é€Ÿ' :
                               currentLanguage === 'ja' ? 'é¢¨é€Ÿ' :
                               currentLanguage === 'es' ? 'Velocidad del viento' :
                               currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ Ğ²ĞµÑ‚Ñ€Ğ°' :
                               'Wind speed'}: ${results.windSpeed.toFixed(1)} m/s<br>${currentLanguage === 'ko' ? 'ë°©í–¥' :
                                                                                    currentLanguage === 'zh' ? 'æ–¹å‘' :
                                                                                    currentLanguage === 'ja' ? 'æ–¹å‘' :
                                                                                    currentLanguage === 'es' ? 'DirecciÃ³n' :
                                                                                    currentLanguage === 'ru' ? 'ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ' :
                                                                                    'Direction'}: ${results.windDirection.toFixed(0)}Â°<extra></extra>`
            });
            
            // 3. ìˆ˜ì†¡ ë²¡í„° (ìŠ¤ì¼€ì¼ ì¡°ì •) 
            const transportScale = windScale * 0.3;
            traces.push({
                x: [0, results.Mx * transportScale / Math.abs(results.Mx || 1)], 
                y: [0, results.My * transportScale / Math.abs(results.My || 1)],
                mode: 'lines+markers',
                line: {color: '#4A9EFF', width: 5, dash: 'dash'},
                marker: {size: 12, symbol: 'arrow', color: '#4A9EFF'},
                name: `ğŸ“Š ${currentLanguage === 'ko' ? 'ìˆ˜ì†¡' :
                            currentLanguage === 'zh' ? 'è¾“è¿' :
                            currentLanguage === 'ja' ? 'è¼¸é€' :
                            currentLanguage === 'es' ? 'Transporte' :
                            currentLanguage === 'ru' ? 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ' :
                            'Transport'} ${Math.sqrt(results.Mx**2 + results.My**2).toExponential(1)} mÂ³/s`,
                hovertemplate: `${currentLanguage === 'ko' ? 'ìˆ˜ì†¡ëŸ‰' :
                               currentLanguage === 'zh' ? 'è¾“è¿é‡' :
                               currentLanguage === 'ja' ? 'è¼¸é€é‡' :
                               currentLanguage === 'es' ? 'Transporte' :
                               currentLanguage === 'ru' ? 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ' :
                               'Transport'}: ${Math.sqrt(results.Mx**2 + results.My**2).toExponential(2)} mÂ³/s<extra></extra>`
            });
            
            const layout = {
                title: {
                    text: t('chart_title_mobile') + `<br>${currentLanguage === 'ko' ? 'ìœ„ë„' :
                                                           currentLanguage === 'zh' ? 'çº¬åº¦' :
                                                           currentLanguage === 'ja' ? 'ç·¯åº¦' :
                                                           currentLanguage === 'es' ? 'Latitud' :
                                                           currentLanguage === 'ru' ? 'Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ°' :
                                                           'Latitude'}: ${(-results.latitude).toFixed(1)}Â°`,
                    font: {color: colors.text, size: 16},
                    x: 0.5,
                    y: 0.95
                },
                xaxis: {
                    title: {text: `U ${currentLanguage === 'ko' ? 'ì†ë„ (ë™-ì„œ, m/s)' :
                                   currentLanguage === 'zh' ? 'é€Ÿåº¦ (ä¸œ-è¥¿, m/s)' :
                                   currentLanguage === 'ja' ? 'é€Ÿåº¦ (æ±-è¥¿, m/s)' :
                                   currentLanguage === 'es' ? 'Velocidad (Este-Oeste, m/s)' :
                                   currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ’Ğ¾ÑÑ‚Ğ¾Ğº-Ğ—Ğ°Ğ¿Ğ°Ğ´, Ğ¼/Ñ)' :
                                   'Velocity (East-West, m/s)'}`, font: {color: colors.text, size: 12}},
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text, size: 11},
                    linecolor: colors.grid,
                    zeroline: true,
                    zerolinecolor: colors.grid
                },
                yaxis: {
                    title: {text: `V ${currentLanguage === 'ko' ? 'ì†ë„ (ë‚¨-ë¶, m/s)' :
                                   currentLanguage === 'zh' ? 'é€Ÿåº¦ (å—-åŒ—, m/s)' :
                                   currentLanguage === 'ja' ? 'é€Ÿåº¦ (å—-åŒ—, m/s)' :
                                   currentLanguage === 'es' ? 'Velocidad (Sur-Norte, m/s)' :
                                   currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ®Ğ³-Ğ¡ĞµĞ²ĞµÑ€, Ğ¼/Ñ)' :
                                   'Velocity (South-North, m/s)'}`, font: {color: colors.text, size: 12}},
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text, size: 11},
                    linecolor: colors.grid,
                    zeroline: true,
                    zerolinecolor: colors.grid
                },
                height: 600,
                showlegend: true,
                legend: {
                    font: {color: colors.text, size: 11},
                    bgcolor: 'rgba(0,0,0,0)',
                    x: 0.02,
                    y: 0.98
                },
                font: {size: 11, color: colors.text},
                plot_bgcolor: colors.background,
                paper_bgcolor: colors.paper,
                margin: {l: 60, r: 80, t: 80, b: 60}
            };
            
            return {data: traces, layout: layout};
        }
        
        // 2D ì‹œê°í™” ìƒì„±
        function create2DPlot(results) {
            const traces = [];
            const colors = getThemeColors();
            
            // 1. ë°”ëŒ vs ìˆ˜ì†¡ ë²¡í„°
            const windDirRad = results.windDirection * Math.PI / 180;
            const windX = results.windSpeed * Math.cos(windDirRad);
            const windY = results.windSpeed * Math.sin(windDirRad);
            
            traces.push({
                x: [0, windX], y: [0, windY],
                mode: 'lines+markers',
                line: {color: '#FF6B35', width: 4},
                marker: {size: 10},
                name: `${currentLanguage === 'ko' ? 'ë°”ëŒ' :
                        currentLanguage === 'zh' ? 'é£' :
                        currentLanguage === 'ja' ? 'é¢¨' :
                        currentLanguage === 'es' ? 'Viento' :
                        currentLanguage === 'ru' ? 'Ğ’ĞµÑ‚ĞµÑ€' :
                        'Wind'} ${results.windSpeed.toFixed(1)} m/s`,
                xaxis: 'x', yaxis: 'y'
            });
            
            const transportScale = 1e6;
            traces.push({
                x: [0, results.Mx * transportScale], 
                y: [0, results.My * transportScale],
                mode: 'lines+markers',
                line: {color: '#4A9EFF', width: 4},
                marker: {size: 10},
                name: `${currentLanguage === 'ko' ? 'ìˆ˜ì†¡' :
                        currentLanguage === 'zh' ? 'è¾“è¿' :
                        currentLanguage === 'ja' ? 'è¼¸é€' :
                        currentLanguage === 'es' ? 'Transporte' :
                        currentLanguage === 'ru' ? 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ' :
                        'Transport'} ${Math.sqrt(results.Mx**2 + results.My**2).toExponential(2)} mÂ³/s`,
                xaxis: 'x', yaxis: 'y'
            });
            
            // 2. ì—í¬ë§Œ ë‚˜ì„ 
            traces.push({
                x: results.uVel, y: results.vVel,
                mode: 'lines+markers',
                line: {color: '#FF4081', width: 3},
                marker: {
                    size: 6,
                    color: results.zLevels,
                    colorscale: 'Viridis',
                    showscale: true,
                    colorbar: {
                        title: {text: t('depth'), font: {color: colors.text}}, 
                        x: 0.48, y: 0.75, len: 0.25,
                        bgcolor: colors.background,
                        bordercolor: colors.grid,
                        tickfont: {color: colors.text}
                    }
                },
                name: currentLanguage === 'ko' ? 'ì—í¬ë§Œ ë‚˜ì„ ' :
                      currentLanguage === 'zh' ? 'åŸƒå…‹æ›¼èºçº¿' :
                      currentLanguage === 'ja' ? 'ã‚¨ã‚¯ãƒãƒ³èºæ—‹' :
                      currentLanguage === 'es' ? 'Espiral de Ekman' :
                      currentLanguage === 'ru' ? 'Ğ¡Ğ¿Ğ¸Ñ€Ğ°Ğ»ÑŒ Ğ­ĞºĞ¼Ğ°Ğ½Ğ°' :
                      'Ekman Spiral',
                xaxis: 'x2', yaxis: 'y2'
            });
            
            // 3. ê¹Šì´ë³„ ì†ë„ í”„ë¡œíŒŒì¼
            traces.push({
                x: results.uVel, y: results.zLevels.map(z => -z),
                mode: 'lines+markers',
                line: {color: '#1F77B4', width: 3},
                marker: {size: 4},
                name: `U ${currentLanguage === 'ko' ? 'ì†ë„ (ë™-ì„œ)' :
                           currentLanguage === 'zh' ? 'é€Ÿåº¦ (ä¸œ-è¥¿)' :
                           currentLanguage === 'ja' ? 'é€Ÿåº¦ (æ±-è¥¿)' :
                           currentLanguage === 'es' ? 'Velocidad (Este-Oeste)' :
                           currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ’Ğ¾ÑÑ‚Ğ¾Ğº-Ğ—Ğ°Ğ¿Ğ°Ğ´)' :
                           'Velocity (East-West)'}`,
                xaxis: 'x3', yaxis: 'y3'
            });
            
            traces.push({
                x: results.vVel, y: results.zLevels.map(z => -z),
                mode: 'lines+markers',
                line: {color: '#FF7F0E', width: 3},
                marker: {size: 4},
                name: `V ${currentLanguage === 'ko' ? 'ì†ë„ (ë‚¨-ë¶)' :
                           currentLanguage === 'zh' ? 'é€Ÿåº¦ (å—-åŒ—)' :
                           currentLanguage === 'ja' ? 'é€Ÿåº¦ (å—-åŒ—)' :
                           currentLanguage === 'es' ? 'Velocidad (Sur-Norte)' :
                           currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ®Ğ³-Ğ¡ĞµĞ²ĞµÑ€)' :
                           'Velocity (South-North)'}`,
                xaxis: 'x3', yaxis: 'y3'
            });
            
            // 4. ìˆ˜ì†¡ ì„±ë¶„ ë°” ì°¨íŠ¸
            traces.push({
                x: [`Mx (${currentLanguage === 'ko' ? 'ë™-ì„œ' :
                           currentLanguage === 'zh' ? 'ä¸œ-è¥¿' :
                           currentLanguage === 'ja' ? 'æ±-è¥¿' :
                           currentLanguage === 'es' ? 'Este-Oeste' :
                           currentLanguage === 'ru' ? 'Ğ’Ğ¾ÑÑ‚Ğ¾Ğº-Ğ—Ğ°Ğ¿Ğ°Ğ´' :
                           'East-West'})`, 
                    `My (${currentLanguage === 'ko' ? 'ë‚¨-ë¶' :
                           currentLanguage === 'zh' ? 'å—-åŒ—' :
                           currentLanguage === 'ja' ? 'å—-åŒ—' :
                           currentLanguage === 'es' ? 'Sur-Norte' :
                           currentLanguage === 'ru' ? 'Ğ®Ğ³-Ğ¡ĞµĞ²ĞµÑ€' :
                           'South-North'})`],
                y: [results.Mx, results.My],
                type: 'bar',
                marker: {color: ['#1F77B4', '#FF7F0E']},
                name: currentLanguage === 'ko' ? 'ìˆ˜ì†¡ ì„±ë¶„' :
                      currentLanguage === 'zh' ? 'è¾“è¿åˆ†é‡' :
                      currentLanguage === 'ja' ? 'è¼¸é€æˆåˆ†' :
                      currentLanguage === 'es' ? 'Componentes de Transporte' :
                      currentLanguage === 'ru' ? 'ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ°' :
                      'Transport Components',
                xaxis: 'x4', yaxis: 'y4'
            });
            
            const layout = {
                title: {
                    text: t('chart_title_2d') + ` (${currentLanguage === 'ko' ? 'ìœ„ë„' :
                                                     currentLanguage === 'zh' ? 'çº¬åº¦' :
                                                     currentLanguage === 'ja' ? 'ç·¯åº¦' :
                                                     currentLanguage === 'es' ? 'Latitud' :
                                                     currentLanguage === 'ru' ? 'Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ°' :
                                                     'Latitude'}: ${(-results.latitude).toFixed(1)}Â°)`,
                    font: {color: colors.text, size: 16}
                },
                grid: {rows: 2, columns: 2, pattern: 'independent'},
                
                // ëª¨ë“  ì¶• ìŠ¤íƒ€ì¼ë§
                xaxis: {
                    title: {text: currentLanguage === 'ko' ? 'ë™-ì„œ ë°©í–¥ (m/s)' :
                                  currentLanguage === 'zh' ? 'ä¸œ-è¥¿æ–¹å‘ (m/s)' :
                                  currentLanguage === 'ja' ? 'æ±-è¥¿æ–¹å‘ (m/s)' :
                                  currentLanguage === 'es' ? 'DirecciÃ³n Este-Oeste (m/s)' :
                                  currentLanguage === 'ru' ? 'ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ’Ğ¾ÑÑ‚Ğ¾Ğº-Ğ—Ğ°Ğ¿Ğ°Ğ´ (Ğ¼/Ñ)' :
                                  'East-West Direction (m/s)', font: {color: colors.text}}, 
                    domain: [0, 0.45],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                yaxis: {
                    title: {text: currentLanguage === 'ko' ? 'ë‚¨-ë¶ ë°©í–¥ (m/s)' :
                                  currentLanguage === 'zh' ? 'å—-åŒ—æ–¹å‘ (m/s)' :
                                  currentLanguage === 'ja' ? 'å—-åŒ—æ–¹å‘ (m/s)' :
                                  currentLanguage === 'es' ? 'DirecciÃ³n Sur-Norte (m/s)' :
                                  currentLanguage === 'ru' ? 'ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ®Ğ³-Ğ¡ĞµĞ²ĞµÑ€ (Ğ¼/Ñ)' :
                                  'South-North Direction (m/s)', font: {color: colors.text}}, 
                    domain: [0.55, 1],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                xaxis2: {
                    title: {text: `U ${currentLanguage === 'ko' ? 'ì†ë„ (m/s)' :
                                    currentLanguage === 'zh' ? 'é€Ÿåº¦ (m/s)' :
                                    currentLanguage === 'ja' ? 'é€Ÿåº¦ (m/s)' :
                                    currentLanguage === 'es' ? 'Velocidad (m/s)' :
                                    currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ¼/Ñ)' :
                                    'Velocity (m/s)'}`, font: {color: colors.text}}, 
                    domain: [0.55, 1],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                yaxis2: {
                    title: {text: `V ${currentLanguage === 'ko' ? 'ì†ë„ (m/s)' :
                                    currentLanguage === 'zh' ? 'é€Ÿåº¦ (m/s)' :
                                    currentLanguage === 'ja' ? 'é€Ÿåº¦ (m/s)' :
                                    currentLanguage === 'es' ? 'Velocidad (m/s)' :
                                    currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ¼/Ñ)' :
                                    'Velocity (m/s)'}`, font: {color: colors.text}}, 
                    domain: [0.55, 1],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                xaxis3: {
                    title: {text: currentLanguage === 'ko' ? 'ì†ë„ (m/s)' :
                                  currentLanguage === 'zh' ? 'é€Ÿåº¦ (m/s)' :
                                  currentLanguage === 'ja' ? 'é€Ÿåº¦ (m/s)' :
                                  currentLanguage === 'es' ? 'Velocidad (m/s)' :
                                  currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (Ğ¼/Ñ)' :
                                  'Velocity (m/s)', font: {color: colors.text}}, 
                    domain: [0, 0.45],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                yaxis3: {
                    title: {text: t('depth'), font: {color: colors.text}}, 
                    domain: [0, 0.45],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                xaxis4: {
                    title: {text: currentLanguage === 'ko' ? 'ì„±ë¶„' :
                                  currentLanguage === 'zh' ? 'åˆ†é‡' :
                                  currentLanguage === 'ja' ? 'æˆåˆ†' :
                                  currentLanguage === 'es' ? 'Componente' :
                                  currentLanguage === 'ru' ? 'ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚' :
                                  'Component', font: {color: colors.text}}, 
                    domain: [0.55, 1],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                yaxis4: {
                    title: {text: currentLanguage === 'ko' ? 'ìˆ˜ì†¡ëŸ‰ (mÂ³/s)' :
                                  currentLanguage === 'zh' ? 'è¾“è¿é‡ (mÂ³/s)' :
                                  currentLanguage === 'ja' ? 'è¼¸é€é‡ (mÂ³/s)' :
                                  currentLanguage === 'es' ? 'Transporte (mÂ³/s)' :
                                  currentLanguage === 'ru' ? 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ (Ğ¼Â³/Ñ)' :
                                  'Transport (mÂ³/s)', font: {color: colors.text}}, 
                    domain: [0, 0.45],
                    gridcolor: colors.grid,
                    tickfont: {color: colors.text},
                    linecolor: colors.grid
                },
                
                height: 800,
                showlegend: true,
                font: {size: 12, color: colors.text},
                plot_bgcolor: colors.background,
                paper_bgcolor: colors.paper,
                legend: {
                    font: {color: colors.text},
                    bgcolor: 'rgba(0,0,0,0)'
                }
            };
            
            return {data: traces, layout: layout};
        }
        
        // 3D ì‹œê°í™” ìƒì„±
        function create3DPlot(results) {
            const traces = [];
            const colors = getThemeColors();
            const speeds = results.uVel.map((u, i) => Math.sqrt(u*u + results.vVel[i]*results.vVel[i]));
            const depth = results.depth;
            // ë¼ë²¨ ë‹¤êµ­ì–´ ì§€ì›
            const LABELS = {
                windstress: {
                    ko: 'ë°”ëŒ ì‘ë ¥', en: 'Windstress', zh: 'é£åº”åŠ›', ja: 'é¢¨å¿œåŠ›', es: 'Esfuerzo del viento', ru: 'Ğ’ĞµÑ‚Ñ€Ğ¾Ğ²Ğ¾Ğµ Ğ½Ğ°Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ¸Ğµ'
                },
                ekman: {
                    ko: 'ì—í¬ë§Œ ìˆ˜ì†¡', en: 'Ekman Transport', zh: 'åŸƒå…‹æ›¼è¾“è¿', ja: 'ã‚¨ã‚¯ãƒãƒ³è¼¸é€', es: 'Transporte de Ekman', ru: 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ Ğ­ĞºĞ¼Ğ°Ğ½Ğ°'
                },
                geos: {
                    ko: 'ì§€ì˜¤ìŠ¤íŠ¸ë¡œí”½ ìˆ˜ì†¡', en: 'Geostrophic Transport', zh: 'åœ°è½¬è¾“è¿', ja: 'åœ°è¡¡æµè¼¸é€', es: 'Transporte geostrÃ³fico', ru: 'Ğ“ĞµĞ¾ÑÑ‚Ñ€Ğ¾Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿ĞµÑ€ĞµĞ½Ğ¾Ñ'
                }
            };
            const lang = currentLanguage in LABELS.windstress ? currentLanguage : 'en';
            // 1. Ekman Spiral (ì–‡ì€ íŒŒë€ìƒ‰ ë²¡í„°)
            for (let i = 0; i < results.zLevels.length; i++) {
                traces.push({
                    x: [0, results.uVel[i] * 1.5],
                    y: [0, results.vVel[i] * 1.5],
                    z: [-results.zLevels[i], -results.zLevels[i]],
                    mode: 'lines',
                    type: 'scatter3d',
                    line: {color: '#223366', width: 3},
                    showlegend: false
                });
            }
            // 2. Windstress (êµµì€ ì˜¤ë Œì§€ í™”ì‚´í‘œ, í‘œë©´)
            const windDirRad = results.windDirection * Math.PI / 180;
            const windLen = Math.max(...speeds) * 3 || 2;
            const windX = windLen * Math.cos(windDirRad);
            const windY = windLen * Math.sin(windDirRad);
            traces.push({
                x: [0, windX], y: [0, windY], z: [0, 0],
                mode: 'lines+markers+text',
                type: 'scatter3d',
                line: {color: '#FF7F32', width: 14},
                marker: {size: 10, color: '#FF7F32'},
                name: LABELS.windstress[lang],
                text: ['', LABELS.windstress[lang]],
                textposition: 'top right',
                showlegend: true
            });
            // 3. Ekman Transport (êµµì€ ì—°ë‘ìƒ‰ í™”ì‚´í‘œ, í‘œë©´)
            const transportScale = windLen * 0.7;
            const transportMag = Math.sqrt(results.Mx**2 + results.My**2);
            const ekmanX = (results.Mx / (transportMag || 1)) * transportScale;
            const ekmanY = (results.My / (transportMag || 1)) * transportScale;
                traces.push({
                x: [0, ekmanX], y: [0, ekmanY], z: [0, 0],
                mode: 'lines+markers+text',
                type: 'scatter3d',
                line: {color: '#A3D977', width: 14},
                marker: {size: 10, color: '#A3D977'},
                name: LABELS.ekman[lang],
                text: ['', LABELS.ekman[lang]],
                textposition: 'middle right',
                showlegend: true
            });
            // 4. Geostrophic Transport (êµµì€ íŒŒë€ìƒ‰ í™”ì‚´í‘œ, ë°”ë‹¥, ì˜ˆì‹œë¡œ ëŒ€ê°ì„ )
            const geoLen = windLen * 0.8;
            const geoAngle = windDirRad + Math.PI / 3; // ì˜ˆì‹œë¡œ ë°”ëŒë°©í–¥ì—ì„œ 60ë„
            const geoX = geoLen * Math.cos(geoAngle);
            const geoY = geoLen * Math.sin(geoAngle);
            traces.push({
                x: [0, geoX], y: [0, geoY], z: [-depth, -depth],
                mode: 'lines+markers+text',
                type: 'scatter3d',
                line: {color: '#3355AA', width: 14},
                marker: {size: 10, color: '#3355AA'},
                name: LABELS.geos[lang],
                text: ['', LABELS.geos[lang]],
                textposition: 'bottom left',
                showlegend: true
            });
            // 5. ê¸°ì¡´ ë‚˜ì„  ì „ì²´ ì—°ê²°ì„ (ì–‡ê²Œ, ë°°ê²½)
            traces.push({
                x: results.uVel,
                y: results.vVel,
                z: results.zLevels.map(z => -z),
                    mode: 'lines',
                    type: 'scatter3d',
                line: {color: '#223366', width: 2, dash: 'dot'},
                showlegend: false
            });
            // ë ˆì´ì•„ì›ƒ ë° ë¼ë²¨
            const layout = {
                title: {
                    text: t('chart_title_3d') + `<br>${currentLanguage === 'ko' ? 'ìœ„ë„' :
                                                  currentLanguage === 'zh' ? 'çº¬åº¦' :
                                                  currentLanguage === 'ja' ? 'ç·¯åº¦' :
                                                  currentLanguage === 'es' ? 'Latitud' :
                                                  currentLanguage === 'ru' ? 'Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ°' :
                                                  'Latitude'}: ${(-results.latitude).toFixed(1)}Â°`,
                    font: {color: colors.text, size: 18},
                    x: 0.5,
                    y: 0.95
                },
                scene: {
                    bgcolor: colors.background,
                    xaxis: {
                        title: {text: `${currentLanguage === 'ko' ? 'ì†ë„/ìˆ˜ì†¡ (ë™-ì„œ, m/s)' :
                                      currentLanguage === 'zh' ? 'é€Ÿåº¦/è¾“è¿ (ä¸œ-è¥¿, m/s)' :
                                      currentLanguage === 'ja' ? 'é€Ÿåº¦/è¼¸é€ (æ±-è¥¿, m/s)' :
                                      currentLanguage === 'es' ? 'Velocidad/Transporte (Este-Oeste, m/s)' :
                                      currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ/ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ (Ğ’Ğ¾ÑÑ‚Ğ¾Ğº-Ğ—Ğ°Ğ¿Ğ°Ğ´, Ğ¼/Ñ)' :
                                      'Velocity/Transport (East-West, m/s)'}`, font: {color: colors.text, size: 14}},
                        gridcolor: colors.grid,
                        tickfont: {color: colors.text, size: 12},
                        linecolor: colors.grid,
                        backgroundcolor: colors.background
                    },
                    yaxis: {
                        title: {text: `${currentLanguage === 'ko' ? 'ì†ë„/ìˆ˜ì†¡ (ë‚¨-ë¶, m/s)' :
                                      currentLanguage === 'zh' ? 'é€Ÿåº¦/è¾“è¿ (å—-åŒ—, m/s)' :
                                      currentLanguage === 'ja' ? 'é€Ÿåº¦/è¼¸é€ (å—-åŒ—, m/s)' :
                                      currentLanguage === 'es' ? 'Velocidad/Transporte (Sur-Norte, m/s)' :
                                      currentLanguage === 'ru' ? 'Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ/ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ (Ğ®Ğ³-Ğ¡ĞµĞ²ĞµÑ€, Ğ¼/Ñ)' :
                                      'Velocity/Transport (South-North, m/s)'}`, font: {color: colors.text, size: 14}},
                        gridcolor: colors.grid,
                        tickfont: {color: colors.text, size: 12},
                        linecolor: colors.grid,
                        backgroundcolor: colors.background
                    },
                    zaxis: {
                        title: {text: t('depth'), font: {color: colors.text, size: 14}},
                        gridcolor: colors.grid,
                        tickfont: {color: colors.text, size: 12},
                        linecolor: colors.grid,
                        backgroundcolor: colors.background
                    },
                    camera: {
                        eye: {x: 1.5, y: 1.5, z: 1.2},
                        center: {x: 0, y: 0, z: 0}
                    },
                    aspectmode: 'cube'
                },
                autosize: true,
                width: null,
                height: null,
                margin: {l: 0, r: 0, t: 60, b: 0},
                font: {size: 14, color: colors.text},
                plot_bgcolor: colors.background,
                paper_bgcolor: colors.paper,
                legend: {
                    font: {color: colors.text, size: 12},
                    bgcolor: 'rgba(0,0,0,0)',
                    x: 0.02,
                    y: 0.98
                },
                annotations: []
            };
            return {data: traces, layout: layout};
        }
        
        // ë©”ì¸ ê³„ì‚° ë° ì‹œê°í™” í•¨ìˆ˜
        function calculateAndVisualize() {
            try {
                console.log("ğŸ”„ ê³„ì‚° ì‹œì‘...");
                
                const windSpeed = parseFloat(document.getElementById('wind_speed').value);
                const windDirection = parseFloat(document.getElementById('wind_direction').value);
                let latitude = parseFloat(document.getElementById('latitude').value);
                const depth = parseFloat(document.getElementById('depth').value);
                
                if (latitude === 0) {
                    latitude = 1;
                    document.getElementById('latitude').value = 1;
                    updateSliderValues();
                }
                
                // ìœ„ë„ ê°’ì„ ìŒìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ê³„ì‚°
                const negativeLatitude = -latitude;
                const results = calculateEkmanTransport(windSpeed, windDirection, negativeLatitude, depth);
                currentResults = results;
                
                const visType = document.querySelector('input[name="vis_type"]:checked').value;
                
                let plotData;
                let config;
                
                if (isMobile()) {
                    // ëª¨ë°”ì¼ ìµœì í™”
                    if (visType === '3d') {
                        plotData = create3DPlot(results);
                    } else {
                        plotData = createMobile2DPlot(results);
                    }
                    
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true,
                        scrollZoom: true,
                        modeBarButtonsToRemove: ['pan2d', 'lasso2d', 'select2d'],
                        modeBarButtonsToAdd: ['downloadpng'],
                        toImageButtonOptions: {
                            format: 'png',
                            filename: 'ekman_transport_mobile',
                            height: 800,
                            width: 600,
                            scale: 2
                        },
                        // ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™”
                        doubleClick: 'reset',
                        touchAction: 'auto'
                    };
                    
                    // ëª¨ë°”ì¼ì—ì„œ ê³„ì‚° í›„ ë©”ë‰´ ìë™ ë‹«ê¸° (ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜)
                    setTimeout(() => {
                        closeMobileMenu();
                        
                        // ì„±ê³µ í”¼ë“œë°±
                        if (navigator.vibrate) {
                            navigator.vibrate([100, 50, 100]);
                        }
                        
                        console.log("ğŸ“± ê³„ì‚° ì™„ë£Œ - ë©”ë‰´ ìë™ ë‹«ê¸°");
                    }, 800);
                    
                } else if (isTablet()) {
                    // íƒœë¸”ë¦¿ ìµœì í™”
                    if (visType === '3d') {
                        plotData = create3DPlot(results);
                    } else {
                        plotData = create2DPlot(results);
                    }
                    
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true,
                        modeBarButtonsToAdd: ['downloadpng'],
                        toImageButtonOptions: {
                            format: 'png',
                            filename: 'ekman_transport_tablet',
                            height: 900,
                            width: 1200,
                            scale: 2
                        }
                    };
                    
                } else {
                    // ë°ìŠ¤í¬í†± (ê¸°ì¡´)
                    if (visType === '3d') {
                        plotData = create3DPlot(results);
                    } else {
                        plotData = create2DPlot(results);
                    }
                    
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true,
                        modeBarButtonsToAdd: ['downloadpng'],
                        toImageButtonOptions: {
                            format: 'png',
                            filename: 'ekman_transport_plot',
                            height: 1000,
                            width: 1600,
                            scale: 2
                        }
                    };
                }
                
                document.getElementById('plot-area').innerHTML = '';
                Plotly.newPlot('plot-area', plotData.data, plotData.layout, config);
                
                // í™”ë©´ í¬ê¸° ë³€ê²½ ì‹œ ìë™ ë¦¬ì‚¬ì´ì¦ˆ ë° ë ˆì´ì•„ì›ƒ ì¬êµ¬ì„±
                window.addEventListener('resize', function() {
                    Plotly.Plots.resize('plot-area');
                    handleWindowResize();
                });
                
                updateResultsDisplay(results);
                
                console.log("âœ… ê³„ì‚° ë° ì‹œê°í™” ì™„ë£Œ!");
                
            } catch (error) {
                console.error("âŒ ì˜¤ë¥˜ ë°œìƒ:", error);
                document.getElementById('plot-area').innerHTML = 
                    `<div style="color: red; text-align: center; padding: 50px; font-size: 16px;">
                        ì˜¤ë¥˜: ${error.message}<br>íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.
                    </div>`;
            }
        }
        
        // ê²°ê³¼ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateResultsDisplay(results) {
            // ê²°ê³¼ ë¼ë²¨ë“¤ë„ ë²ˆì—­ ì ìš©
            const resultLabels = document.querySelectorAll('.result-label');
            resultLabels.forEach((element, index) => {
                const labels = ['wind_stress', 'ekman_depth', 'total_transport', 'energy_transfer'];
                if (labels[index]) {
                    element.textContent = t(labels[index]);
                }
            });
            
            // ë²ˆì—­ëœ ë‹¨ìœ„ë¡œ ê²°ê³¼ ê°’ í‘œì‹œ
            document.getElementById('wind_stress').textContent = 
                `${(results.windStress * 1000).toFixed(3)} ${t('unit_wind_stress')}`;
            document.getElementById('ekman_depth').textContent = 
                `${results.ekmanDepth.toFixed(2)} ${t('unit_meter')}`;
            
            const totalTransport = Math.sqrt(results.Mx**2 + results.My**2);
            document.getElementById('total_transport').textContent = 
                `${totalTransport.toExponential(3)} ${t('unit_transport')}`;
            document.getElementById('energy_transfer').textContent = 
                `${(results.energyTransfer * 1000).toFixed(4)} ${t('unit_energy')}`;
        }
        
        // ë‚´ë³´ë‚´ê¸°
        function exportResults() {
            if (!currentResults) {
                const message = currentLanguage === 'ko' ? "âŒ ë¨¼ì € ê³„ì‚°ì„ ìˆ˜í–‰í•˜ì„¸ìš”." :
                               currentLanguage === 'zh' ? "âŒ è¯·å…ˆæ‰§è¡Œè®¡ç®—ã€‚" :
                               currentLanguage === 'ja' ? "âŒ ã¾ãšè¨ˆç®—ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚" :
                               currentLanguage === 'es' ? "âŒ Por favor, ejecute el cÃ¡lculo primero." :
                               currentLanguage === 'ru' ? "âŒ Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚Ğµ Ñ€Ğ°ÑÑ‡ĞµÑ‚." :
                               "âŒ Please run the calculation first.";
                console.log(message);
                return;
            }
            const exportData = {
                [currentLanguage === 'ko' ? 'ì…ë ¥ íŒŒë¼ë¯¸í„°' :
                 currentLanguage === 'zh' ? 'è¾“å…¥å‚æ•°' :
                 currentLanguage === 'ja' ? 'å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿' :
                 currentLanguage === 'es' ? 'ParÃ¡metros de Entrada' :
                 currentLanguage === 'ru' ? 'Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹' :
                 'Input Parameters']: {
                    [t('wind_speed')]: currentResults.windSpeed,
                    [t('wind_direction')]: currentResults.windDirection,
                    [t('latitude')]: -currentResults.latitude,
                    [t('depth')]: currentResults.depth
                },
                [currentLanguage === 'ko' ? 'ê³„ì‚° ê²°ê³¼' :
                 currentLanguage === 'zh' ? 'è®¡ç®—ç»“æœ' :
                 currentLanguage === 'ja' ? 'è¨ˆç®—çµæœ' :
                 currentLanguage === 'es' ? 'Resultados del CÃ¡lculo' :
                 currentLanguage === 'ru' ? 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°' :
                 'Calculation Results']: {
                    [t('wind_stress')]: currentResults.windStress.toExponential(6),
                    [t('ekman_depth')]: currentResults.ekmanDepth.toFixed(2),
                    [`Mx ${currentLanguage === 'ko' ? 'ìˆ˜ì†¡' :
                           currentLanguage === 'zh' ? 'è¾“è¿' :
                           currentLanguage === 'ja' ? 'è¼¸é€' :
                           currentLanguage === 'es' ? 'Transporte' :
                           currentLanguage === 'ru' ? 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ' :
                           'Transport'} (mÂ³/s)`]: currentResults.Mx.toExponential(6),
                    [`My ${currentLanguage === 'ko' ? 'ìˆ˜ì†¡' :
                           currentLanguage === 'zh' ? 'è¾“è¿' :
                           currentLanguage === 'ja' ? 'è¼¸é€' :
                           currentLanguage === 'es' ? 'Transporte' :
                           currentLanguage === 'ru' ? 'ĞŸĞµÑ€ĞµĞ½Ğ¾Ñ' :
                           'Transport'} (mÂ³/s)`]: currentResults.My.toExponential(6),
                    [t('total_transport')]: Math.sqrt(currentResults.Mx**2 + currentResults.My**2).toExponential(6),
                    [t('energy_transfer')]: currentResults.energyTransfer.toExponential(6),
                    [currentLanguage === 'ko' ? 'ì½”ë¦¬ì˜¬ë¦¬ ë§¤ê°œë³€ìˆ˜' :
                     currentLanguage === 'zh' ? 'ç§‘é‡Œå¥¥åˆ©å‚æ•°' :
                     currentLanguage === 'ja' ? 'ã‚³ãƒªã‚ªãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿' :
                     currentLanguage === 'es' ? 'ParÃ¡metro de Coriolis' :
                     currentLanguage === 'ru' ? 'ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ ĞšĞ¾Ñ€Ğ¸Ğ¾Ğ»Ğ¸ÑĞ°' :
                     'Coriolis Parameter']: currentResults.f.toExponential(6)
                }
            };
            // ì‹¤ì œ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì¶”ê°€
            const blob = new Blob([JSON.stringify(exportData, null, 2)], {type: "application/json"});
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "ekman_export.json";
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 0);
        }
        
                // í…Œë§ˆ ë³€ê²½ ê°ì§€ ë° ì°¨íŠ¸ ì—…ë°ì´íŠ¸ (ë””ë°”ì´ìŠ¤ë³„ ìµœì í™”)
        function handleThemeChange() {
            if (currentResults) {
                const visType = document.querySelector('input[name="vis_type"]:checked').value;
                let plotData;
                let config;
                
                // ë””ë°”ì´ìŠ¤ë³„ ì°¨íŠ¸ ì„ íƒ
                if (isMobile()) {
                    if (visType === '3d') {
                        plotData = create3DPlot(currentResults);
                    } else {
                        plotData = createMobile2DPlot(currentResults);
                    }
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true,
                        scrollZoom: true,
                        doubleClick: 'reset',
                        touchAction: 'auto'
                    };
                } else if (isTablet()) {
                    if (visType === '3d') {
                        plotData = create3DPlot(currentResults);
                    } else {
                        plotData = create2DPlot(currentResults);
                    }
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true
                    };
                } else {
                    if (visType === '3d') {
                        plotData = create3DPlot(currentResults);
                    } else {
                        plotData = create2DPlot(currentResults);
                    }
                    config = {
                        displayModeBar: true,
                        displaylogo: false,
                        responsive: true
                    };
                }
                
                Plotly.newPlot('plot-area', plotData.data, plotData.layout, config);
                
                // ì°¨íŠ¸ ë¦¬ì‚¬ì´ì¦ˆ ì ìš©
                setTimeout(() => {
                    Plotly.Plots.resize('plot-area');
                }, 100);
                
                console.log(`ğŸ¨ í…Œë§ˆ ë³€ê²½ - ${isMobile() ? 'ëª¨ë°”ì¼' : isTablet() ? 'íƒœë¸”ë¦¿' : 'ë°ìŠ¤í¬í†±'} ìµœì í™” ì ìš©!`);
            }
        }
        
        // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ê°ì§€ ë° ì ì‘í˜• ë ˆì´ì•„ì›ƒ
        function handleWindowResize() {
            if (currentResults) {
                // ë””ë°”ì´ìŠ¤ íƒ€ì…ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ ì°¨íŠ¸ ì¬êµ¬ì„±
                setTimeout(() => {
                    handleThemeChange();
                }, 200);
            }
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            // ì–¸ì–´ ì„¤ì • ì´ˆê¸°í™”
            const languageSelect = document.getElementById('language');
            languageSelect.value = currentLanguage;
            
            // ì–¸ì–´ ë³€ê²½ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            languageSelect.addEventListener('change', function() {
                changeLanguage(this.value);
                console.log(`ğŸŒ ${currentLanguage === 'ko' ? 'ì–¸ì–´ê°€' :
                                  currentLanguage === 'zh' ? 'è¯­è¨€å·²åˆ‡æ¢ä¸º' :
                                  currentLanguage === 'ja' ? 'è¨€èªãŒ' :
                                  currentLanguage === 'es' ? 'Idioma cambiado a' :
                                  currentLanguage === 'ru' ? 'Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ°' :
                                  'Language changed to'} ${currentLanguage}${currentLanguage === 'ko' ? 'ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.' :
                                                                                                      currentLanguage === 'zh' ? '' :
                                                                                                      currentLanguage === 'ja' ? 'ã«å¤‰æ›´ã•ã‚Œã¾ã—ãŸã€‚' :
                                                                                                      currentLanguage === 'es' ? '' :
                                                                                                      currentLanguage === 'ru' ? '' :
                                                                                                      ''}`);
            });
            
            // ì´ˆê¸° UI í…ìŠ¤íŠ¸ ì„¤ì •
            updateUITexts();
            
            // ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
            ['wind_speed', 'wind_direction', 'latitude', 'depth'].forEach(id => {
                document.getElementById(id).addEventListener('input', updateSliderValues);
            });
            
            // ì§€ì—­ ì„ íƒ ì´ë²¤íŠ¸
            document.getElementById('location').addEventListener('change', onLocationSelect);
            
            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸ (ESCë¡œ ë©”ë‰´ ë‹«ê¸°, Enterë¡œ ë©”ë‰´ ì—´ê¸°)
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const menuPanel = document.querySelector('.mobile-menu-panel');
                    if (menuPanel && menuPanel.classList.contains('active')) {
                        closeMobileMenu();
                        e.preventDefault();
                    }
                }
                
                // í–„ë²„ê±° ë²„íŠ¼ì— í¬ì»¤ìŠ¤ê°€ ìˆì„ ë•Œ Enter/Spaceë¡œ ë©”ë‰´ í† ê¸€
                if ((e.key === 'Enter' || e.key === ' ') && e.target.classList.contains('mobile-menu-toggle')) {
                    toggleMobileMenu();
                    e.preventDefault();
                }
            });
            
            // ëª¨ë°”ì¼ ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ ì„¤ì •
            if (isMobile()) {
                setupSwipeGesture();
                setupButtonDragGesture();
            }
            
            // ë²„íŠ¼ ë“œë˜ê·¸ë¡œ ë©”ë‰´ ì—´ê¸° ì œìŠ¤ì²˜ ì„¤ì •
            function setupButtonDragGesture() {
                const menuToggle = document.querySelector('.mobile-menu-toggle');
                const menuPanel = document.querySelector('.mobile-menu-panel');
                const overlay = document.querySelector('.mobile-menu-overlay');
                let startX = 0;
                let currentX = 0;
                let isDragging = false;
                let dragStarted = false;
                
                menuToggle.addEventListener('touchstart', function(e) {
                    startX = e.touches[0].clientX;
                    isDragging = true;
                    dragStarted = false;
                    e.preventDefault();
                }, { passive: false });
                
                menuToggle.addEventListener('touchmove', function(e) {
                    if (!isDragging) return;
                    currentX = e.touches[0].clientX;
                    const diffX = currentX - startX;
                    
                    // ìš°ì¸¡ìœ¼ë¡œ ë“œë˜ê·¸í•˜ëŠ” ê²½ìš° (ë©”ë‰´ ì—´ê¸°)
                    if (diffX > 30 && !dragStarted) {
                        dragStarted = true;
                        
                        // ë©”ë‰´ ì—´ê¸° ì‹œì‘
                        menuPanel.classList.add('active');
                        overlay.classList.add('active');
                        menuToggle.classList.add('active');
                        document.body.classList.add('menu-open');
                        menuToggle.setAttribute('aria-expanded', 'true');
                        
                        // ì§„ë™ í”¼ë“œë°±
                        if (navigator.vibrate) {
                            navigator.vibrate(20);
                        }
                    }
                    
                    if (dragStarted && diffX > 0) {
                        // íŒ¨ë„ì„ ë“œë˜ê·¸ ê±°ë¦¬ì— ë”°ë¼ ì´ë™
                        const maxWidth = menuPanel.offsetWidth || 350;
                        const translateX = Math.min(diffX - maxWidth, 0);
                        menuPanel.style.transform = `translateX(${translateX}px)`;
                    }
                }, { passive: true });
                
                menuToggle.addEventListener('touchend', function(e) {
                    if (!isDragging) return;
                    isDragging = false;
                    
                    const diffX = currentX - startX;
                    
                    if (dragStarted) {
                        // ì¶©ë¶„íˆ ìš°ì¸¡ìœ¼ë¡œ ë“œë˜ê·¸í–ˆìœ¼ë©´ ë©”ë‰´ ì—´ë¦¼ ìœ ì§€, ì•„ë‹ˆë©´ ë‹«ê¸°
                        if (diffX < 50) {
                            // ë“œë˜ê·¸ê°€ ì¶©ë¶„í•˜ì§€ ì•Šìœ¼ë©´ ë©”ë‰´ ë‹«ê¸°
                            menuPanel.classList.remove('active');
                            overlay.classList.remove('active');
                            menuToggle.classList.remove('active');
                            document.body.classList.remove('menu-open');
                            menuToggle.setAttribute('aria-expanded', 'false');
                        }
                    }
                    
                    // ë³€í˜• ì´ˆê¸°í™”
                    menuPanel.style.transform = '';
                    dragStarted = false;
                }, { passive: true });
                
                // í´ë¦­ ì´ë²¤íŠ¸ëŠ” ë“œë˜ê·¸ê°€ ì•„ë‹ ë•Œë§Œ ì‘ë™
                menuToggle.addEventListener('click', function(e) {
                    if (isDragging) {
                        e.preventDefault();
                        return false;
                    }
                });
            }
            
            // ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ê°ì§€
            if (window.matchMedia) {
                const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
                mediaQuery.addEventListener('change', handleThemeChange);
                
                // ì´ˆê¸° í…Œë§ˆ ìƒíƒœ ë¡œê·¸
                console.log(`ğŸ¨ í˜„ì¬ í…Œë§ˆ: ${isDarkMode() ? 'ë‹¤í¬ ëª¨ë“œ' : 'ë¼ì´íŠ¸ ëª¨ë“œ'}`);
            }
            
            // ì‹œê°í™” íƒ€ì… ë³€ê²½ ì´ë²¤íŠ¸
            document.querySelectorAll('input[name="vis_type"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    if (currentResults) {
                        handleThemeChange(); // ë””ë°”ì´ìŠ¤ë³„ ìµœì í™”ëœ ì°¨íŠ¸ ë Œë”ë§
                    }
                });
            });
            
            // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ (ë””ë°”ì´ìŠ¤ ë³€ê²½ ê°ì§€)
            window.addEventListener('resize', handleWindowResize);
            
            // ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸ ìµœì í™”
            if (isMobile()) {
                // ëª¨ë°”ì¼ì—ì„œ ë“œë˜ê·¸ ì‹œ í˜ì´ì§€ ìŠ¤í¬ë¡¤ ë°©ì§€
                document.addEventListener('touchmove', function(e) {
                    if (e.target.closest('#plot-area')) {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                console.log("ğŸ“± ëª¨ë°”ì¼ ìµœì í™” ëª¨ë“œ í™œì„±í™”");
            } else if (isTablet()) {
                console.log("ğŸ“± íƒœë¸”ë¦¿ ìµœì í™” ëª¨ë“œ í™œì„±í™”");
            } else {
                console.log("ğŸ–¥ï¸ ë°ìŠ¤í¬í†± ëª¨ë“œ í™œì„±í™”");
            }
            
            // ì´ˆê¸°ê°’ ì„¤ì •
            updateSliderValues();
            
            console.log("ğŸŒŠ Ekman Transport Visualizer ë¡œë“œ ì™„ë£Œ!");
            console.log("ğŸ“Š íŒŒì´ì¬ ìŠ¤íƒ€ì¼ ì‹œê°í™”ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.");
            console.log("ğŸŒ— ìë™ ë‹¤í¬/ë¼ì´íŠ¸ ëª¨ë“œ ì „í™˜ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
            console.log("ğŸ“± ë°˜ì‘í˜• ë””ìì¸ (ë°ìŠ¤í¬í†±/íƒœë¸”ë¦¿/ëª¨ë°”ì¼) ì§€ì›");
            const multiLangMessage = currentLanguage === 'ko' ? `ğŸŒ ë‹¤ì¤‘ì–¸ì–´ ì§€ì› í™œì„±í™” (í˜„ì¬: ${currentLanguage})` :
                                    currentLanguage === 'zh' ? `ğŸŒ å¤šè¯­è¨€æ”¯æŒå·²æ¿€æ´» (å½“å‰: ${currentLanguage})` :
                                    currentLanguage === 'ja' ? `ğŸŒ å¤šè¨€èªã‚µãƒãƒ¼ãƒˆãŒæœ‰åŠ¹ (ç¾åœ¨: ${currentLanguage})` :
                                    currentLanguage === 'es' ? `ğŸŒ Soporte multiidioma activado (actual: ${currentLanguage})` :
                                    currentLanguage === 'ru' ? `ğŸŒ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¼Ğ½Ğ¾Ğ³Ğ¾ÑĞ·Ñ‹Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ° (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹: ${currentLanguage})` :
                                    `ğŸŒ Multi-language support activated (current: ${currentLanguage})`;
            console.log(multiLangMessage);
        });
        
        // ğŸ’¡ ì†”ë£¨ì…˜ ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜ë“¤
        function openSolutionModal() {
            document.getElementById('solutionModal').style.display = 'block';
            // ëª¨ë‹¬ ì œëª©ì„ í˜„ì¬ ì–¸ì–´ë¡œ ì—…ë°ì´íŠ¸
            document.querySelector('.solution-modal-title').textContent = `ğŸ’¡ ${t('solution_title')}`;
            showQuickStart(); // ê¸°ë³¸ì ìœ¼ë¡œ ë¹ ë¥¸ ì‹œì‘ í˜ì´ì§€ í‘œì‹œ
        }
        
        function closeSolutionModal() {
            document.getElementById('solutionModal').style.display = 'none';
        }
        
        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('solutionModal');
            if (event.target === modal) {
                closeSolutionModal();
            }
        });
        
        // ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ
        function showQuickStart() {
            const modalBody = document.getElementById('solutionModalBody');
            modalBody.innerHTML = `
                <div class="solution-section">
                    <h3>ğŸš€ ${t('solution_quick_start_title')}</h3>
                    <p>${t('solution_quick_start_desc')}</p>
                    
                    <div class="solution-step">
                        <h4>${t('solution_step1_title')}</h4>
                        <ul>
                            <li>ğŸŒ¬ï¸ <strong>${t('wind_speed')}</strong>: 0-30 m/s ${currentLanguage === 'ko' ? 'ë²”ìœ„ì—ì„œ ì„¤ì • (ê¸°ë³¸ê°’: 10 m/s)' : 'range (default: 10 m/s)'}</li>
                            <li>ğŸ§­ <strong>${t('wind_direction')}</strong>: 0-360Â° ${currentLanguage === 'ko' ? 'ë²”ìœ„ì—ì„œ ì„¤ì • (ê¸°ë³¸ê°’: 0ë„)' : 'range (default: 0Â°)'}</li>
                            <li>ğŸŒ <strong>${t('latitude')}</strong>: -90Â° to 90Â° ${currentLanguage === 'ko' ? 'ë²”ìœ„ì—ì„œ ì„¤ì • (ê¸°ë³¸ê°’: 30ë„)' : 'range (default: 30Â°)'}</li>
                            <li>ğŸŒŠ <strong>${t('depth')}</strong>: 10-500m ${currentLanguage === 'ko' ? 'ë²”ìœ„ì—ì„œ ì„¤ì • (ê¸°ë³¸ê°’: 100m)' : 'range (default: 100m)'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-step">
                        <h4>${t('solution_step2_title')}</h4>
                        <ul>
                            <li>ğŸ”® <strong>${t('vis_3d')}</strong>: ${currentLanguage === 'ko' ? 'ì…ì²´ì ì¸ ì—í¬ë§Œ ë‚˜ì„ ê³¼ ìˆ˜ì†¡ ë²¡í„° í™•ì¸' : '3D Ekman spiral and transport vectors'}</li>
                            <li>ğŸ“ˆ <strong>${t('vis_2d')}</strong>: ${currentLanguage === 'ko' ? 'í‰ë©´ì—ì„œì˜ í•´ë¥˜ íŒ¨í„´ê³¼ ê¹Šì´ë³„ ë³€í™” ë¶„ì„' : '2D current patterns and depth variations'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-step">
                        <h4>${t('solution_step3_title')}</h4>
                        <ul>
                            <li>ğŸŒ¤ï¸ <strong>${t('preset_normal')}</strong>: ${currentLanguage === 'ko' ? 'í‰ìƒì‹œ ë°”ëŒ ì¡°ê±´ (10 m/s)' : 'Normal wind conditions (10 m/s)'}</li>
                            <li>ğŸ’¨ <strong>${t('preset_strong')}</strong>: ${currentLanguage === 'ko' ? 'ê°•í•œ ë°”ëŒ ì¡°ê±´ (20 m/s)' : 'Strong wind conditions (20 m/s)'}</li>
                            <li>ğŸŒªï¸ <strong>${t('preset_typhoon')}</strong>: ${currentLanguage === 'ko' ? 'ê·¹í•œ ë°”ëŒ ì¡°ê±´ (30 m/s)' : 'Extreme wind conditions (30 m/s)'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-step">
                        <h4>${t('solution_step4_title')}</h4>
                        <ul>
                            <li>ğŸ”„ <strong>${t('calc_button')}</strong> ${currentLanguage === 'ko' ? 'ë²„íŠ¼ í´ë¦­' : 'button click'}</li>
                            <li>ğŸ“Š <strong>${currentLanguage === 'ko' ? 'ê²°ê³¼ í™•ì¸' : 'Check results'}</strong>: ${currentLanguage === 'ko' ? 'ë°”ëŒ ì‘ë ¥, ì—í¬ë§Œ ê¹Šì´, ì´ ìˆ˜ì†¡ëŸ‰ ë“±' : 'Wind stress, Ekman depth, total transport, etc.'}</li>
                            <li>ğŸ’¾ <strong>${t('export_button')}</strong>: ${currentLanguage === 'ko' ? 'JSON í˜•íƒœë¡œ ë°ì´í„° ì €ì¥' : 'Save data as JSON'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-tip">
                        <strong>ğŸ’¡ ${currentLanguage === 'ko' ? 'íŒ:' : 'Tip:'}</strong> ${currentLanguage === 'ko' ? 'ì²˜ìŒ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ë“¤ì€ "ì¼ë°˜" ì‚¬ì „ ì„¤ì •ë¶€í„° ì‹œì‘í•˜ì‹œëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.' : 'For first-time users, we recommend starting with the "Normal" preset.'}
                    </div>
                </div>
            `;
        }
        
        // ê³ ê¸‰ ì‚¬ìš©ë²•
        function showAdvancedUsage() {
            const modalBody = document.getElementById('solutionModalBody');
            modalBody.innerHTML = `
                <div class="solution-section">
                    <h3>ğŸ”¬ ${t('solution_advanced_title')}</h3>
                    <p>${t('solution_advanced_desc')}</p>
                    
                    <div class="solution-section">
                        <h4>ğŸŒŠ ${currentLanguage === 'ko' ? 'ì§€ì—­ë³„ íŠ¹ì„± ë¶„ì„' : 'Regional Characteristic Analysis'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¶íƒœí‰ì–‘' : 'North Pacific'}</strong>: ${currentLanguage === 'ko' ? 'ê°•í•œ ì„œí’ê³¼ ì¿ ë¡œì‹œì˜¤ í•´ë¥˜ì˜ ìƒí˜¸ì‘ìš©' : 'Strong westerlies and Kuroshio Current interaction'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¶ëŒ€ì„œì–‘' : 'North Atlantic'}</strong>: ${currentLanguage === 'ko' ? 'ê±¸í”„ í•´ë¥˜ì™€ ë¶ëŒ€ì„œì–‘ í•´ë¥˜ì˜ ë³µí•© íš¨ê³¼' : 'Gulf Stream and North Atlantic Current combined effects'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë‚¨ê·¹í•´' : 'Southern Ocean'}</strong>: ${currentLanguage === 'ko' ? 'ê·¹ì§€ë°©ì˜ ê°•í•œ ì„œí’ê³¼ ë‚¨ê·¹ ìˆœí™˜' : 'Polar strong westerlies and Antarctic circulation'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ì ë„' : 'Equator'}</strong>: ${currentLanguage === 'ko' ? 'ì½”ë¦¬ì˜¬ë¦¬ íš¨ê³¼ê°€ ìµœì†Œí™”ëœ ì§€ì—­' : 'Region with minimized Coriolis effect'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸ“Š ${currentLanguage === 'ko' ? '3D ì‹œê°í™” ì‹¬í™” ë¶„ì„' : '3D Visualization Deep Analysis'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ì—í¬ë§Œ ë‚˜ì„ ' : 'Ekman Spiral'}</strong>: ${currentLanguage === 'ko' ? 'ê¹Šì´ì— ë”°ë¥¸ í•´ë¥˜ ë°©í–¥ ë³€í™” íŒ¨í„´' : 'Current direction change pattern with depth'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ìˆ˜ì†¡ ë²¡í„°' : 'Transport Vectors'}</strong>: ${currentLanguage === 'ko' ? 'ë°”ëŒ ì‘ë ¥ì— ì˜í•œ í•´ìˆ˜ ì´ë™ëŸ‰' : 'Seawater transport due to wind stress'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ì—ë„ˆì§€ ì „ë‹¬' : 'Energy Transfer'}</strong>: ${currentLanguage === 'ko' ? 'ë°”ëŒì—ì„œ í•´ìˆ˜ë¡œì˜ ì—ë„ˆì§€ ì „ë‹¬ë¥ ' : 'Energy transfer rate from wind to seawater'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸ”§ ${currentLanguage === 'ko' ? 'íŒŒë¼ë¯¸í„° ìµœì í™”' : 'Parameter Optimization'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ìœ„ë„ë³„ ì½”ë¦¬ì˜¬ë¦¬ íš¨ê³¼' : 'Latitude-dependent Coriolis Effect'}</strong>: ${currentLanguage === 'ko' ? 'ìœ„ë„ê°€ ë†’ì„ìˆ˜ë¡ ì½”ë¦¬ì˜¬ë¦¬ íš¨ê³¼ ì¦ê°€' : 'Coriolis effect increases with latitude'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë°”ëŒ ì†ë„ì™€ ì‘ë ¥' : 'Wind Speed and Stress'}</strong>: ${currentLanguage === 'ko' ? 'ë°”ëŒ ì†ë„ì˜ ì œê³±ì— ë¹„ë¡€í•˜ëŠ” ì‘ë ¥' : 'Stress proportional to wind speed squared'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ê¹Šì´ì™€ ë‚œë¥˜' : 'Depth and Turbulence'}</strong>: ${currentLanguage === 'ko' ? 'ê¹Šì´ì— ë”°ë¥¸ ìˆ˜ì§ ë‚œë¥˜ í™•ì‚°' : 'Vertical turbulence diffusion with depth'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-warning">
                        <strong>âš ï¸ ${currentLanguage === 'ko' ? 'ì£¼ì˜ì‚¬í•­:' : 'Warning:'}</strong> ${currentLanguage === 'ko' ? 'ê·¹í•œ ì¡°ê±´(íƒœí’ ë“±)ì—ì„œëŠ” ì‹¤ì œ í•´ì–‘ í˜„ìƒê³¼ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.' : 'Under extreme conditions (typhoons, etc.), there may be differences from actual ocean phenomena.'}
                    </div>
                </div>
            `;
        }
        
        // ë¬¸ì œ í•´ê²°
        function showTroubleshooting() {
            const modalBody = document.getElementById('solutionModalBody');
            modalBody.innerHTML = `
                <div class="solution-section">
                    <h3>ğŸ”§ ${t('solution_trouble_title')}</h3>
                    <p>${t('solution_trouble_desc')}</p>
                    
                    <div class="solution-section">
                        <h4>â“ ${currentLanguage === 'ko' ? 'ì°¨íŠ¸ê°€ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ' : 'When charts are not displayed'}</h4>
                        <ul>
                            <li>${currentLanguage === 'ko' ? 'ì¸í„°ë„· ì—°ê²° ìƒíƒœ í™•ì¸' : 'Check internet connection'}</li>
                            <li>${currentLanguage === 'ko' ? 'ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ (F5)' : 'Browser refresh (F5)'}</li>
                            <li>${currentLanguage === 'ko' ? 'ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¡œ ì‹œë„' : 'Try different browser'}</li>
                            <li>${currentLanguage === 'ko' ? 'JavaScript í™œì„±í™” í™•ì¸' : 'Check JavaScript enabled'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>â“ ${currentLanguage === 'ko' ? 'ê³„ì‚° ê²°ê³¼ê°€ ì´ìƒí•  ë•Œ' : 'When calculation results are abnormal'}</h4>
                        <ul>
                            <li>${currentLanguage === 'ko' ? 'íŒŒë¼ë¯¸í„° ê°’ì´ ìœ íš¨í•œ ë²”ìœ„ì¸ì§€ í™•ì¸' : 'Check if parameter values are in valid range'}</li>
                            <li>${currentLanguage === 'ko' ? 'ìœ„ë„ ê°’ì´ -90ë„ì—ì„œ 90ë„ ì‚¬ì´ì¸ì§€ í™•ì¸' : 'Check if latitude is between -90Â° and 90Â°'}</li>
                            <li>${currentLanguage === 'ko' ? 'ë°”ëŒ ì†ë„ê°€ 0ë³´ë‹¤ í°ì§€ í™•ì¸' : 'Check if wind speed is greater than 0'}</li>
                            <li>${currentLanguage === 'ko' ? 'ê¹Šì´ ê°’ì´ 10m ì´ìƒì¸ì§€ í™•ì¸' : 'Check if depth is 10m or more'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>â“ ${currentLanguage === 'ko' ? 'ë‚´ë³´ë‚´ê¸°ê°€ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ' : 'When export is not working'}</h4>
                        <ul>
                            <li>${currentLanguage === 'ko' ? 'ë¨¼ì € ê³„ì‚°ì„ ì‹¤í–‰í–ˆëŠ”ì§€ í™•ì¸' : 'Check if calculation was executed first'}</li>
                            <li>${currentLanguage === 'ko' ? 'ë¸Œë¼ìš°ì €ì˜ íŒì—… ì°¨ë‹¨ ì„¤ì • í™•ì¸' : 'Check browser popup blocker settings'}</li>
                            <li>${currentLanguage === 'ko' ? 'ë‹¤ìš´ë¡œë“œ í´ë” ê¶Œí•œ í™•ì¸' : 'Check download folder permissions'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>â“ ${currentLanguage === 'ko' ? 'ëª¨ë°”ì¼ì—ì„œ ì‚¬ìš©í•  ë•Œ' : 'When using on mobile'}</h4>
                        <ul>
                            <li>${currentLanguage === 'ko' ? 'ê°€ë¡œ ëª¨ë“œë¡œ ì „í™˜í•˜ì—¬ ì‚¬ìš©' : 'Switch to landscape mode'}</li>
                            <li>${currentLanguage === 'ko' ? 'í•€ì¹˜ ì¤Œ ì œìŠ¤ì²˜ë¡œ ì°¨íŠ¸ í™•ëŒ€/ì¶•ì†Œ' : 'Pinch zoom gesture for chart zoom'}</li>
                            <li>${currentLanguage === 'ko' ? 'í„°ì¹˜ ë“œë˜ê·¸ë¡œ ì°¨íŠ¸ íšŒì „ (3D)' : 'Touch drag for chart rotation (3D)'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-tip">
                        <strong>ğŸ’¡ ${currentLanguage === 'ko' ? 'íŒ:' : 'Tip:'}</strong> ${currentLanguage === 'ko' ? 'ë¬¸ì œê°€ ì§€ì†ë˜ë©´ ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.' : 'If problems persist, clear browser cache and try again.'}
                    </div>
                </div>
            `;
        }
        
        // ëª¨ë²” ì‚¬ë¡€
        function showBestPractices() {
            const modalBody = document.getElementById('solutionModalBody');
            modalBody.innerHTML = `
                <div class="solution-section">
                    <h3>â­ ${t('solution_best_title')}</h3>
                    <p>${t('solution_best_desc')}</p>
                    
                    <div class="solution-section">
                        <h4>ğŸ¯ ${currentLanguage === 'ko' ? 'íŒŒë¼ë¯¸í„° ì„¤ì • ëª¨ë²” ì‚¬ë¡€' : 'Parameter Setting Best Practices'}</h4>
                        <ul>
                            <li><strong>${t('wind_speed')}</strong>: ${currentLanguage === 'ko' ? 'ì‹¤ì œ ê´€ì¸¡ ë°ì´í„° ê¸°ë°˜ ì„¤ì •' : 'Set based on actual observation data'}</li>
                            <li><strong>${t('wind_direction')}</strong>: ${currentLanguage === 'ko' ? 'ê³„ì ˆë³„ ì£¼ìš” ë°”ëŒ íŒ¨í„´ ê³ ë ¤' : 'Consider seasonal wind patterns'}</li>
                            <li><strong>${t('latitude')}</strong>: ${currentLanguage === 'ko' ? 'ë¶„ì„ ëŒ€ìƒ ì§€ì—­ì˜ ì •í™•í•œ ìœ„ë„ ì‚¬ìš©' : 'Use accurate latitude of target region'}</li>
                            <li><strong>${t('depth')}</strong>: ${currentLanguage === 'ko' ? 'ê´€ì‹¬ ìˆëŠ” ìˆ˜ì¸µ ê¹Šì´ ì„¤ì •' : 'Set depth of interest'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸ“Š ${currentLanguage === 'ko' ? 'ì‹œê°í™” í™œìš© ëª¨ë²” ì‚¬ë¡€' : 'Visualization Best Practices'}</h4>
                        <ul>
                            <li><strong>${t('vis_3d')}</strong>: ${currentLanguage === 'ko' ? 'í•´ë¥˜ì˜ ìˆ˜ì§ êµ¬ì¡° ë¶„ì„' : 'Vertical structure analysis of currents'}</li>
                            <li><strong>${t('vis_2d')}</strong>: ${currentLanguage === 'ko' ? 'í‰ë©´ì—ì„œì˜ í•´ë¥˜ íŒ¨í„´ ë¶„ì„' : '2D current pattern analysis'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ê²°ê³¼ ë¹„êµ' : 'Result Comparison'}</strong>: ${currentLanguage === 'ko' ? 'ë‹¤ì–‘í•œ ì¡°ê±´ì—ì„œì˜ ê²°ê³¼ ë¹„êµ' : 'Compare results under various conditions'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸ”¬ ${currentLanguage === 'ko' ? 'ê³¼í•™ì  ë¶„ì„ ëª¨ë²” ì‚¬ë¡€' : 'Scientific Analysis Best Practices'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ì‹œìŠ¤í…œì  ì ‘ê·¼' : 'Systematic Approach'}</strong>: ${currentLanguage === 'ko' ? 'ì²´ê³„ì ì¸ íŒŒë¼ë¯¸í„° ë³€í™” ì‹¤í—˜' : 'Systematic parameter variation experiments'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¬¸ì„œí™”' : 'Documentation'}</strong>: ${currentLanguage === 'ko' ? 'ë¶„ì„ ì¡°ê±´ê³¼ ê²°ê³¼ë¥¼ ìƒì„¸íˆ ê¸°ë¡' : 'Detailed recording of analysis conditions and results'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ê²€ì¦' : 'Verification'}</strong>: ${currentLanguage === 'ko' ? 'ë‹¤ë¥¸ ë„êµ¬ë‚˜ ì´ë¡ ê³¼ì˜ ë¹„êµ ê²€ì¦' : 'Comparison verification with other tools or theories'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'í•´ì„' : 'Interpretation'}</strong>: ${currentLanguage === 'ko' ? 'ë¬¼ë¦¬ì  ì˜ë¯¸ë¥¼ ê³ ë ¤í•œ ê²°ê³¼ í•´ì„' : 'Result interpretation considering physical meaning'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-tip">
                        <strong>ğŸ’¡ ${currentLanguage === 'ko' ? 'íŒ:' : 'Tip:'}</strong> ${currentLanguage === 'ko' ? 'ë¶„ì„ ê²°ê³¼ëŠ” í•­ìƒ ë¬¼ë¦¬ì  ë°°ê²½ê³¼ í•¨ê»˜ í•´ì„í•˜ì„¸ìš”.' : 'Always interpret analysis results with physical background.'}
                    </div>
                </div>
            `;
        }
        
        // ì‚¬ë¡€ ì—°êµ¬
        function showCaseStudies() {
            const modalBody = document.getElementById('solutionModalBody');
            modalBody.innerHTML = `
                <div class="solution-section">
                    <h3>ğŸ“Š ${t('solution_case_title')}</h3>
                    <p>${t('solution_case_desc')}</p>
                    
                    <div class="solution-section">
                        <h4>ğŸŒŠ ${currentLanguage === 'ko' ? 'ì¿ ë¡œì‹œì˜¤ í•´ë¥˜ ë¶„ì„' : 'Kuroshio Current Analysis'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ì§€ì—­' : 'Region'}</strong>: ${currentLanguage === 'ko' ? 'ë¶íƒœí‰ì–‘ (ìœ„ë„: 30-35ë„)' : 'North Pacific (Latitude: 30-35Â°)'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë°”ëŒ ì¡°ê±´' : 'Wind Conditions'}</strong>: ${currentLanguage === 'ko' ? 'ì„œí’ 15-20 m/s' : 'Westerlies 15-20 m/s'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¶„ì„ í¬ì¸íŠ¸' : 'Analysis Point'}</strong>: ${currentLanguage === 'ko' ? 'ê°•í•œ í•´ë¥˜ì™€ ë°”ëŒì˜ ìƒí˜¸ì‘ìš©' : 'Interaction between strong currents and wind'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ê²°ê³¼ í•´ì„' : 'Result Interpretation'}</strong>: ${currentLanguage === 'ko' ? 'ì—í¬ë§Œ ìˆ˜ì†¡ì´ ì¿ ë¡œì‹œì˜¤ í•´ë¥˜ì— ë¯¸ì¹˜ëŠ” ì˜í–¥' : 'Effect of Ekman transport on Kuroshio Current'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸŒªï¸ ${currentLanguage === 'ko' ? 'íƒœí’ ì¡°ê±´ ì‹œë®¬ë ˆì´ì…˜' : 'Typhoon Condition Simulation'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ë°”ëŒ ì¡°ê±´' : 'Wind Conditions'}</strong>: ${currentLanguage === 'ko' ? '25-30 m/s ê°•í’' : '25-30 m/s strong wind'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¶„ì„ í¬ì¸íŠ¸' : 'Analysis Point'}</strong>: ${currentLanguage === 'ko' ? 'ê·¹í•œ ì¡°ê±´ì—ì„œì˜ í•´ë¥˜ ë³€í™”' : 'Current changes under extreme conditions'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ì‘ìš© ë¶„ì•¼' : 'Application Fields'}</strong>: ${currentLanguage === 'ko' ? 'íƒœí’ ê²½ë¡œ ì˜ˆì¸¡, í•´ì–‘ ì•ˆì „' : 'Typhoon path prediction, marine safety'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸ§Š ${currentLanguage === 'ko' ? 'ê·¹ì§€ í•´ë¥˜ ë¶„ì„' : 'Polar Current Analysis'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ì§€ì—­' : 'Region'}</strong>: ${currentLanguage === 'ko' ? 'ë‚¨ê·¹í•´ (ìœ„ë„: -60ë„)' : 'Southern Ocean (Latitude: -60Â°)'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'íŠ¹ì§•' : 'Characteristics'}</strong>: ${currentLanguage === 'ko' ? 'ê°•í•œ ì½”ë¦¬ì˜¬ë¦¬ íš¨ê³¼' : 'Strong Coriolis effect'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¶„ì„ í¬ì¸íŠ¸' : 'Analysis Point'}</strong>: ${currentLanguage === 'ko' ? 'ê·¹ì§€ ìˆœí™˜ê³¼ ì—í¬ë§Œ ìˆ˜ì†¡' : 'Polar circulation and Ekman transport'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-section">
                        <h4>ğŸ”† ${currentLanguage === 'ko' ? 'ì ë„ í•´ë¥˜ ë¶„ì„' : 'Equatorial Current Analysis'}</h4>
                        <ul>
                            <li><strong>${currentLanguage === 'ko' ? 'ì§€ì—­' : 'Region'}</strong>: ${currentLanguage === 'ko' ? 'ì ë„ ê·¼ì²˜ (ìœ„ë„: 0-5ë„)' : 'Near equator (Latitude: 0-5Â°)'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'íŠ¹ì§•' : 'Characteristics'}</strong>: ${currentLanguage === 'ko' ? 'ì½”ë¦¬ì˜¬ë¦¬ íš¨ê³¼ ìµœì†Œí™”' : 'Minimized Coriolis effect'}</li>
                            <li><strong>${currentLanguage === 'ko' ? 'ë¶„ì„ í¬ì¸íŠ¸' : 'Analysis Point'}</strong>: ${currentLanguage === 'ko' ? 'ì ë„ í•´ë¥˜ì˜ íŠ¹ìˆ˜ì„±' : 'Special characteristics of equatorial currents'}</li>
                        </ul>
                    </div>
                    
                    <div class="solution-tip">
                        <strong>ğŸ’¡ ${currentLanguage === 'ko' ? 'íŒ:' : 'Tip:'}</strong> ${currentLanguage === 'ko' ? 'ê° ì‚¬ë¡€ ì—°êµ¬ì˜ ê²°ê³¼ë¥¼ ì‹¤ì œ ê´€ì¸¡ ë°ì´í„°ì™€ ë¹„êµí•´ë³´ì„¸ìš”.' : 'Compare the results of each case study with actual observation data.'}
                    </div>
                </div>
            `;
        }
        
        // ì¸ë¼ì¸ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€ (onclick ëŒ€ì²´)
        document.addEventListener('DOMContentLoaded', function() {
            // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
            const menuToggle = document.querySelector('.mobile-menu-toggle');
            if (menuToggle) {
                menuToggle.addEventListener('click', toggleMobileMenu);
            }
            
            // ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸° (ì˜¤ë²„ë ˆì´)
            const menuOverlay = document.querySelector('.mobile-menu-overlay');
            if (menuOverlay) {
                menuOverlay.addEventListener('click', closeMobileMenu);
                menuOverlay.addEventListener('touchend', closeMobileMenu);
            }
            
            // ì‚¬ì „ ì„¤ì • ë²„íŠ¼ë“¤ (data-preset ì†ì„± ì‚¬ìš©)
            const presetButtons = document.querySelectorAll('.tk-button[data-preset]');
            presetButtons.forEach(btn => {
                const preset = btn.getAttribute('data-preset');
                btn.addEventListener('click', () => setPreset(preset));
            });
            
            // ê³„ì‚° ë° ë‚´ë³´ë‚´ê¸° ë²„íŠ¼
            const calculateBtn = document.getElementById('calculate-btn');
            const exportBtn = document.getElementById('export-btn');
            if (calculateBtn) {
                calculateBtn.addEventListener('click', calculateAndVisualize);
            }
            if (exportBtn) {
                exportBtn.addEventListener('click', exportResults);
            }
            
            // ì†”ë£¨ì…˜ ëª¨ë‹¬ ë‹«ê¸° ë²„íŠ¼
            const solutionModalClose = document.querySelector('.solution-modal-close');
            if (solutionModalClose) {
                solutionModalClose.addEventListener('click', closeSolutionModal);
            }
            
            // í‘¸í„° ë° ê¸°íƒ€ ë§í¬ë“¤ì—ì„œ onclick ì œê±°
            const linksWithOnclick = document.querySelectorAll('a[onclick]');
            linksWithOnclick.forEach(link => {
                const onclick = link.getAttribute('onclick');
                if (onclick) {
                    link.removeAttribute('onclick');
                    if (onclick.includes('return false')) {
                        link.addEventListener('click', function(e) {
                            e.preventDefault();
                            // í•¨ìˆ˜ í˜¸ì¶œë§Œ ì‹¤í–‰
                            const funcCall = onclick.replace(/return false;?/g, '').trim();
                            if (funcCall) {
                                try {
                                    if (funcCall.includes('setPreset')) {
                                        const match = funcCall.match(/setPreset\('(\w+)'\)/);
                                        if (match) setPreset(match[1]);
                                    } else if (funcCall.includes('document.getElementById')) {
                                        eval(funcCall);
                                    } else if (funcCall.includes('exportResults')) {
                                        exportResults();
                                    } else if (funcCall.includes('openSolutionModal')) {
                                        openSolutionModal();
                                    } else if (funcCall.includes('showQuickStart')) {
                                        showQuickStart();
                                    } else if (funcCall.includes('showAdvancedUsage')) {
                                        showAdvancedUsage();
                                    } else if (funcCall.includes('showTroubleshooting')) {
                                        showTroubleshooting();
                                    } else if (funcCall.includes('showBestPractices')) {
                                        showBestPractices();
                                    } else if (funcCall.includes('showCaseStudies')) {
                                        showCaseStudies();
                                    } else if (funcCall.includes('alert')) {
                                        eval(funcCall);
                                    }
                                } catch (err) {
                                    console.error('Error executing:', funcCall, err);
                                }
                            }
                        });
                    }
                }
            });
            
            // í‘¸í„° ë° ê¸°íƒ€ ë§í¬ë“¤ì—ì„œ data-action ì²˜ë¦¬
            document.querySelectorAll('a[data-action]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const action = link.getAttribute('data-action');
                    const preset = link.getAttribute('data-preset');
                    const vis = link.getAttribute('data-vis');
                    
                    switch(action) {
                        case 'preset':
                            if (preset) setPreset(preset);
                            break;
                        case 'vis':
                            if (vis) {
                                const radio = document.getElementById(`vis_${vis}`);
                                if (radio) radio.click();
                            }
                            break;
                        case 'export':
                            exportResults();
                            break;
                        case 'solution':
                            openSolutionModal();
                            break;
                        case 'quickstart':
                            showQuickStart();
                            break;
                        case 'advanced':
                            showAdvancedUsage();
                            break;
                        case 'troubleshooting':
                            showTroubleshooting();
                            break;
                        case 'bestpractices':
                            showBestPractices();
                            break;
                        case 'casestudies':
                            showCaseStudies();
                            break;
                    }
                });
            });
            
            // data-alert ì†ì„± ì²˜ë¦¬
            document.querySelectorAll('a[data-alert]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const message = link.getAttribute('data-alert');
                    if (message) alert(message);
                });
            });
        });